(function(u,w){typeof exports=="object"&&typeof module<"u"?module.exports=w(require("vue")):typeof define=="function"&&define.amd?define(["vue"],w):(u=typeof globalThis<"u"?globalThis:u||self,u.MMFMRenderer=w(u.Vue))})(this,function(u){"use strict";const w={props:{children:Object,token:Object,plain:{type:Boolean,default:!1},className:String,nowrap:{type:Boolean,default:!1},note:Object,style:Object},methods:{showBr(d,f){return f+1!==this.parsedText.length}},computed:{parsedText(){return this.plain?[this.token.text.replace(/\n/g," ")]:this.token.text.split(/\r\n|\n|\r/)}}},$=(d,f)=>{const n=d.__vccOpts||d;for(const[l,o]of f)n[l]=o;return n},x={key:0};function v(d,f,n,l,o,e){return u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(e.parsedText,(a,N)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createElementVNode("span",{class:u.normalizeClass(["text",[n.className,d.$attrs.class]]),style:u.normalizeStyle(n.style)},u.toDisplayString(a),7),e.showBr(a,N)?(u.openBlock(),u.createElementBlock("br",x)):u.createCommentVNode("",!0)],64))),256)}const ee=$(w,[["render",v]]);var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z={},T={},A={},D={},K={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.createLanguage=d.lazy=d.lineEnd=d.lineBegin=d.char=d.newline=d.crlf=d.lf=d.cr=d.notMatch=d.alt=d.seq=d.regexp=d.str=d.Parser=d.failure=d.success=void 0;function f(y,_){return{success:!0,value:_,index:y}}d.success=f;function n(){return{success:!1}}d.failure=n;class l{constructor(_,p){this.handler=(t,r,c)=>{if(c.trace&&this.name!=null){const s=`${r}`;console.log(`${s.padEnd(6," ")}enter ${this.name}`);const h=_(t,r,c);if(h.success){const i=`${r}:${h.index}`;console.log(`${i.padEnd(6," ")}match ${this.name}`)}else{const i=`${r}`;console.log(`${i.padEnd(6," ")}fail ${this.name}`)}return h}return _(t,r,c)},this.name=p}map(_){return new l((p,t,r)=>{const c=this.handler(p,t,r);return c.success?f(c.index,_(c.value)):c})}text(){return new l((_,p,t)=>{const r=this.handler(_,p,t);if(!r.success)return r;const c=_.slice(p,r.index);return f(r.index,c)})}many(_){return new l((p,t,r)=>{let c,s=t;const h=[];for(;s<p.length&&(c=this.handler(p,s,r),!!c.success);)s=c.index,h.push(c.value);return h.length<_?n():f(s,h)})}sep(_,p){if(p<1)throw new Error('"min" must be a value greater than or equal to 1.');return a([this,a([_,this],1).many(p-1)]).map(t=>[t[0],...t[1]])}option(){return N([this,E(null)])}}d.Parser=l;function o(y){return new l((_,p,t)=>_.length-p<y.length||_.substr(p,y.length)!==y?n():f(p+y.length,y))}d.str=o;function e(y){const _=RegExp(`^(?:${y.source})`,y.flags);return new l((p,t,r)=>{const c=p.slice(t),s=_.exec(c);return s==null?n():f(t+s[0].length,s[0])})}d.regexp=e;function a(y,_){return new l((p,t,r)=>{let c,s=t;const h=[];for(let i=0;i<y.length;i++){if(c=y[i].handler(p,s,r),!c.success)return c;s=c.index,h.push(c.value)}return f(s,_!=null?h[_]:h)})}d.seq=a;function N(y){return new l((_,p,t)=>{let r;for(let c=0;c<y.length;c++)if(r=y[c].handler(_,p,t),r.success)return r;return n()})}d.alt=N;function E(y){return new l((_,p,t)=>f(p,y))}function O(y){return new l((_,p,t)=>y.handler(_,p,t).success?n():f(p,null))}d.notMatch=O,d.cr=o("\r"),d.lf=o(`
`),d.crlf=o(`\r
`),d.newline=N([d.crlf,d.cr,d.lf]),d.char=new l((y,_,p)=>{if(y.length-_<1)return n();const t=y.charAt(_);return f(_+1,t)}),d.lineBegin=new l((y,_,p)=>_===0||d.cr.handler(y,_-1,p).success||d.lf.handler(y,_-1,p).success?f(_,null):n()),d.lineEnd=new l((y,_,p)=>_===y.length||d.cr.handler(y,_,p).success||d.lf.handler(y,_,p).success?f(_,null):n());function g(y){const _=new l((p,t,r)=>(_.handler=y().handler,_.handler(p,t,r)));return _}d.lazy=g;function L(y){const _={};for(const p of Object.keys(y))_[p]=g(()=>{const t=y[p](_);if(t==null)throw new Error("syntax must return a parser.");return t.name=p,t});return _}d.createLanguage=L})(K);var I={},R={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.isMfmBlock=void 0;const f=["quote","search","blockCode","mathBlock","center"];function n(m){return f.includes(m.type)}d.isMfmBlock=n;const l=m=>({type:"quote",children:m});d.QUOTE=l;const o=(m,C)=>({type:"search",props:{query:m,content:C}});d.SEARCH=o;const e=(m,C)=>({type:"blockCode",props:{code:m,lang:C}});d.CODE_BLOCK=e;const a=m=>({type:"mathBlock",props:{formula:m}});d.MATH_BLOCK=a;const N=m=>({type:"center",children:m});d.CENTER=N;const E=m=>({type:"unicodeEmoji",props:{emoji:m}});d.UNI_EMOJI=E;const O=m=>({type:"emojiCode",props:{name:m}});d.EMOJI_CODE=O;const g=m=>({type:"bold",children:m});d.BOLD=g;const L=m=>({type:"small",children:m});d.SMALL=L;const y=m=>({type:"italic",children:m});d.ITALIC=y;const _=m=>({type:"strike",children:m});d.STRIKE=_;const p=m=>({type:"inlineCode",props:{code:m}});d.INLINE_CODE=p;const t=m=>({type:"mathInline",props:{formula:m}});d.MATH_INLINE=t;const r=(m,C,M)=>({type:"mention",props:{username:m,host:C,acct:M}});d.MENTION=r;const c=m=>({type:"hashtag",props:{hashtag:m}});d.HASHTAG=c;const s=(m,C)=>{const M={type:"url",props:{url:m}};return C&&(M.props.brackets=C),M};d.N_URL=s;const h=(m,C,M)=>({type:"link",props:{silent:m,url:C},children:M});d.LINK=h;const i=(m,C,M)=>({type:"fn",props:{name:m,args:C},children:M});d.FN=i;const b=m=>({type:"plain",children:[(0,d.TEXT)(m)]});d.PLAIN=b;const k=m=>({type:"text",props:{text:m}});d.TEXT=k})(R),Object.defineProperty(I,"__esModule",{value:!0}),I.inspectOne=I.stringifyTree=I.stringifyNode=I.mergeText=void 0;const H=R;function de(d){const f=[],n=[];function l(){n.length>0&&(f.push((0,H.TEXT)(n.join(""))),n.length=0)}const o=d.flat(1);for(const e of o)typeof e=="string"?n.push(e):!Array.isArray(e)&&e.type==="text"?n.push(e.props.text):(l(),f.push(e));return l(),f}I.mergeText=de;function F(d){var f;switch(d.type){case"quote":return j(d.children).split(`
`).map(n=>`> ${n}`).join(`
`);case"search":return d.props.content;case"blockCode":return`\`\`\`${(f=d.props.lang)!==null&&f!==void 0?f:""}
${d.props.code}
\`\`\``;case"mathBlock":return`\\[
${d.props.formula}
\\]`;case"center":return`<center>
${j(d.children)}
</center>`;case"emojiCode":return`:${d.props.name}:`;case"unicodeEmoji":return d.props.emoji;case"bold":return`**${j(d.children)}**`;case"small":return`<small>${j(d.children)}</small>`;case"italic":return`<i>${j(d.children)}</i>`;case"strike":return`~~${j(d.children)}~~`;case"inlineCode":return`\`${d.props.code}\``;case"mathInline":return`\\(${d.props.formula}\\)`;case"mention":return d.props.acct;case"hashtag":return`#${d.props.hashtag}`;case"url":return d.props.brackets?`<${d.props.url}>`:d.props.url;case"link":return`${d.props.silent?"?":""}[${j(d.children)}](${d.props.url})`;case"fn":{const n=Object.keys(d.props.args).map(o=>{const e=d.props.args[o];return e===!0?o:`${o}=${e}`}),l=n.length>0?"."+n.join(","):"";return`$[${d.props.name}${l} ${j(d.children)}]`}case"plain":return`<plain>
${j(d.children)}
</plain>`;case"text":return d.props.text}throw new Error("unknown mfm node")}I.stringifyNode=F;var q;(function(d){d[d.none=0]="none",d[d.inline=1]="inline",d[d.block=2]="block"})(q||(q={}));function j(d){const f=[];let n=q.none;for(const l of d){let o=!0;(0,H.isMfmBlock)(l)?(n===q.none&&(o=!1),n=q.block):((n===q.none||n===q.inline)&&(o=!1),n=q.inline),o&&f.push((0,H.TEXT)(`
`)),f.push(l)}return f.map(l=>F(l)).join("")}I.stringifyTree=j;function V(d,f){if(f(d),d.children!=null)for(const n of d.children)V(n,f)}I.inspectOne=V;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var J;function ue(){if(J)return D;J=1;var d=S&&S.__createBinding||(Object.create?function(t,r,c,s){s===void 0&&(s=c);var h=Object.getOwnPropertyDescriptor(r,c);(!h||("get"in h?!r.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return r[c]}}),Object.defineProperty(t,s,h)}:function(t,r,c,s){s===void 0&&(s=c),t[s]=r[c]}),f=S&&S.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),n=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var c in t)c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)&&d(r,t,c);return f(r,t),r},l=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D,"__esModule",{value:!0}),D.language=void 0;const o=n(W()),e=n(K),a=I,N=l(U),E=e.regexp(/[\u0020\u3000\t]/),O=e.regexp(/[a-z0-9]/i),g=e.alt([e.crlf,e.cr,e.lf]);function L(t){return new e.Parser((r,c,s)=>{const h=[];let i=c;for(let b=0;b<t.length;b++){const k=t[b].handler(r,i,s);if(!k.success)return i===c?e.failure():e.success(i,r.slice(c,i));h.push(k.value),i=k.index}return e.success(i,h)})}const y=new e.Parser((t,r,c)=>c.linkLabel?e.failure():e.success(r,null)),_=new e.Parser((t,r,c)=>c.depth<c.nestLimit?e.success(r,null):e.failure());function p(t,r){const c=e.alt([e.seq([_,t],1),r??e.char]);return new e.Parser((s,h,i)=>{i.depth++;const b=c.handler(s,h,i);return i.depth--,b})}return D.language=e.createLanguage({fullParser:t=>t.full.many(0),simpleParser:t=>t.simple.many(0),full:t=>e.alt([t.unicodeEmoji,t.centerTag,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.codeBlock,t.inlineCode,t.quote,t.mathBlock,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.search,t.text]),simple:t=>e.alt([t.unicodeEmoji,t.emojiCode,t.text]),inline:t=>e.alt([t.unicodeEmoji,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.inlineCode,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.text]),quote:t=>{const r=e.seq([e.str(">"),E.option(),e.seq([e.notMatch(g),e.char],1).many(0).text()],2).sep(g,1),c=e.seq([g.option(),g.option(),e.lineBegin,r,g.option(),g.option()],3);return new e.Parser((s,h,i)=>{let b;if(b=c.handler(s,h,i),!b.success)return b;const k=b.value,m=b.index;return k.length===1&&k[0].length===0?e.failure():(b=p(t.fullParser).many(0).handler(k.join(`
`),0,i),b.success?e.success(m,o.QUOTE((0,a.mergeText)(b.value))):b)})},codeBlock:t=>{const r=e.str("```");return e.seq([g.option(),e.lineBegin,r,e.seq([e.notMatch(g),e.char],1).many(0),g,e.seq([e.notMatch(e.seq([g,r,e.lineEnd])),e.char],1).many(1),g,r,e.lineEnd,g.option()]).map(c=>{const s=c[3].join("").trim(),h=c[5].join("");return o.CODE_BLOCK(h,s.length>0?s:null)})},mathBlock:t=>{const r=e.str("\\["),c=e.str("\\]");return e.seq([g.option(),e.lineBegin,r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),e.char],1).many(1),g.option(),c,e.lineEnd,g.option()]).map(s=>{const h=s[4].join("");return o.MATH_BLOCK(h)})},centerTag:t=>{const r=e.str("<center>"),c=e.str("</center>");return e.seq([g.option(),e.lineBegin,r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),p(t.inline)],1).many(1),g.option(),c,e.lineEnd,g.option()]).map(s=>o.CENTER((0,a.mergeText)(s[4])))},big:t=>{const r=e.str("***");return L([r,e.seq([e.notMatch(r),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:o.FN("tada",{},(0,a.mergeText)(c[1])))},boldAsta:t=>{const r=e.str("**");return L([r,e.seq([e.notMatch(r),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:o.BOLD((0,a.mergeText)(c[1])))},boldTag:t=>{const r=e.str("<b>"),c=e.str("</b>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:o.BOLD((0,a.mergeText)(s[1])))},boldUnder:t=>{const r=e.str("__");return e.seq([r,e.alt([O,E]).many(1),r]).map(c=>o.BOLD((0,a.mergeText)(c[1])))},smallTag:t=>{const r=e.str("<small>"),c=e.str("</small>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:o.SMALL((0,a.mergeText)(s[1])))},italicTag:t=>{const r=e.str("<i>"),c=e.str("</i>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:o.ITALIC((0,a.mergeText)(s[1])))},italicAsta:t=>{const r=e.str("*"),c=e.seq([r,e.alt([O,E]).many(1),r]);return new e.Parser((s,h,i)=>{const b=c.handler(s,h,i);if(!b.success)return e.failure();const k=s.slice(0,h);return/[a-z0-9]$/i.test(k)?e.failure():e.success(b.index,o.ITALIC((0,a.mergeText)(b.value[1])))})},italicUnder:t=>{const r=e.str("_"),c=e.seq([r,e.alt([O,E]).many(1),r]);return new e.Parser((s,h,i)=>{const b=c.handler(s,h,i);if(!b.success)return e.failure();const k=s.slice(0,h);return/[a-z0-9]$/i.test(k)?e.failure():e.success(b.index,o.ITALIC((0,a.mergeText)(b.value[1])))})},strikeTag:t=>{const r=e.str("<s>"),c=e.str("</s>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:o.STRIKE((0,a.mergeText)(s[1])))},strikeWave:t=>{const r=e.str("~~");return L([r,e.seq([e.notMatch(e.alt([r,g])),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:o.STRIKE((0,a.mergeText)(c[1])))},unicodeEmoji:t=>{const r=RegExp(N.default.source);return e.regexp(r).map(c=>o.UNI_EMOJI(c))},plainTag:t=>{const r=e.str("<plain>"),c=e.str("</plain>");return e.seq([r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),e.char],1).many(1).text(),g.option(),c],2).map(s=>o.PLAIN(s))},fn:t=>{const r=new e.Parser((i,b,k)=>{const m=e.regexp(/[a-z0-9_]+/i).handler(i,b,k);return m.success?e.success(m.index,m.value):m}),c=e.seq([e.regexp(/[a-z0-9_]+/i),e.seq([e.str("="),e.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(i=>({k:i[0],v:i[1]!=null?i[1]:!0})),s=e.seq([e.str("."),c.sep(e.str(","),1)],1).map(i=>{const b={};for(const k of i)b[k.k]=k.v;return b}),h=e.str("]");return L([e.str("$["),r,s.option(),e.str(" "),e.seq([e.notMatch(h),p(t.inline)],1).many(1),h]).map(i=>{if(typeof i=="string")return i;const b=i[1],k=i[2]||{},m=i[4];return o.FN(b,k,(0,a.mergeText)(m))})},inlineCode:t=>{const r=e.str("`");return e.seq([r,e.seq([e.notMatch(e.alt([r,e.str("´"),g])),e.char],1).many(1),r]).map(c=>o.INLINE_CODE(c[1].join("")))},mathInline:t=>{const r=e.str("\\("),c=e.str("\\)");return e.seq([r,e.seq([e.notMatch(e.alt([c,g])),e.char],1).many(1),c]).map(s=>o.MATH_INLINE(s[1].join("")))},mention:t=>{const r=e.seq([y,e.str("@"),e.regexp(/[a-z0-9_-]+/i),e.seq([e.str("@"),e.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new e.Parser((c,s,h)=>{let i;if(i=r.handler(c,s,h),!i.success)return e.failure();const b=c.slice(0,s);if(/[a-z0-9]$/i.test(b))return e.failure();let k=!1;const m=i.index,C=i.value[2],M=i.value[3];let B=M;M!=null&&(i=/[.-]+$/.exec(M),i!=null&&(B=M.slice(0,-1*i[0].length),B.length===0&&(k=!0,B=null)));let P=C;if(i=/-+$/.exec(C),i!=null&&(B==null?P=C.slice(0,-1*i[0].length):k=!0),(P.length===0||P[0]==="-")&&(k=!0),B!=null&&/^[.-]/.test(B)&&(k=!0),k)return e.success(m,c.slice(s,m));const Z=B!=null?`@${P}@${B}`:`@${P}`;return e.success(s+Z.length,o.MENTION(P,B,Z))})},hashtag:t=>{const r=e.str("#"),c=e.seq([e.notMatch(e.alt([e.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),E,g])),e.char],1),s=e.lazy(()=>e.alt([e.seq([e.str("("),p(s,c).many(0),e.str(")")]),e.seq([e.str("["),p(s,c).many(0),e.str("]")]),e.seq([e.str("「"),p(s,c).many(0),e.str("」")]),e.seq([e.str("（"),p(s,c).many(0),e.str("）")]),c])),h=e.seq([y,r,s.many(1).text()],2);return new e.Parser((i,b,k)=>{const m=h.handler(i,b,k);if(!m.success)return e.failure();const C=i.slice(0,b);if(/[a-z0-9]$/i.test(C))return e.failure();const M=m.index,B=m.value;return/^[0-9]+$/.test(B)?e.failure():e.success(M,o.HASHTAG(B))})},emojiCode:t=>{const r=e.notMatch(e.regexp(/[a-z0-9]/i)),c=e.str(":");return e.seq([e.alt([e.lineBegin,r]),c,e.regexp(/[a-z0-9_+-]+/i),c,e.alt([e.lineEnd,r])],2).map(s=>o.EMOJI_CODE(s))},link:t=>{const r=new e.Parser((s,h,i)=>{i.linkLabel=!0;const b=t.inline.handler(s,h,i);return i.linkLabel=!1,b}),c=e.str("]");return e.seq([y,e.alt([e.str("?["),e.str("[")]),e.seq([e.notMatch(e.alt([c,g])),p(r)],1).many(1),c,e.str("("),e.alt([t.urlAlt,t.url]),e.str(")")]).map(s=>{const h=s[1]==="?[",i=s[2],b=s[5];return o.LINK(h,b.props.url,(0,a.mergeText)(i))})},url:t=>{const r=e.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),c=e.lazy(()=>e.alt([e.seq([e.str("("),p(c,r).many(0),e.str(")")]),e.seq([e.str("["),p(c,r).many(0),e.str("]")]),r])),s=e.seq([y,e.regexp(/https?:\/\//),c.many(1).text()]);return new e.Parser((h,i,b)=>{let k;if(k=s.handler(h,i,b),!k.success)return e.failure();const m=k.index;let C=m;const M=k.value[1];let B=k.value[2];return k=/[.,]+$/.exec(B),k!=null&&(C-=k[0].length,B=B.slice(0,-1*k[0].length),B.length===0)?e.success(m,h.slice(i,m)):e.success(C,o.N_URL(M+B,!1))})},urlAlt:t=>{const r=e.str("<"),c=e.str(">"),s=e.seq([y,r,e.regexp(/https?:\/\//),e.seq([e.notMatch(e.alt([c,E])),e.char],1).many(1),c]).text();return new e.Parser((h,i,b)=>{const k=s.handler(h,i,b);if(!k.success)return e.failure();const m=k.value.slice(1,k.value.length-1);return e.success(k.index,o.N_URL(m,!0))})},search:t=>{const r=e.alt([e.regexp(/\[(検索|search)\]/i),e.regexp(/(検索|search)/i)]);return e.seq([g.option(),e.lineBegin,e.seq([e.notMatch(e.alt([g,e.seq([E,r,e.lineEnd])])),e.char],1).many(1),E,r,e.lineEnd,g.option()]).map(c=>{const s=c[2].join("");return o.SEARCH(s,`${s}${c[3]}${c[4]}`)})},text:t=>e.char}),D}var Q;function ne(){if(Q)return A;Q=1,Object.defineProperty(A,"__esModule",{value:!0}),A.simpleParser=A.fullParser=void 0;const d=ue(),f=I;function n(o,e){const a=d.language.fullParser.handler(o,0,{nestLimit:e.nestLimit!=null?e.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,f.mergeText)(a.value)}A.fullParser=n;function l(o){const e=d.language.simpleParser.handler(o,0,{});return(0,f.mergeText)(e.value)}return A.simpleParser=l,A}var X;function te(){if(X)return T;X=1,Object.defineProperty(T,"__esModule",{value:!0}),T.extract=T.inspect=T.toString=T.parseSimple=T.parse=void 0;const d=ne(),f=I;function n(N,E={}){return(0,d.fullParser)(N,{nestLimit:E.nestLimit})}T.parse=n;function l(N){return(0,d.simpleParser)(N)}T.parseSimple=l;function o(N){return Array.isArray(N)?(0,f.stringifyTree)(N):(0,f.stringifyNode)(N)}T.toString=o;function e(N,E){if(Array.isArray(N))for(const O of N)(0,f.inspectOne)(O,E);else(0,f.inspectOne)(N,E)}T.inspect=e;function a(N,E){const O=[];return e(N,g=>{E(g)&&O.push(g)}),O}return T.extract=a,T}var G;function W(){return G||(G=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.extract=d.inspect=d.toString=d.parseSimple=d.parse=void 0;var f=te();Object.defineProperty(d,"parse",{enumerable:!0,get:function(){return f.parse}}),Object.defineProperty(d,"parseSimple",{enumerable:!0,get:function(){return f.parseSimple}}),Object.defineProperty(d,"toString",{enumerable:!0,get:function(){return f.toString}}),Object.defineProperty(d,"inspect",{enumerable:!0,get:function(){return f.inspect}}),Object.defineProperty(d,"extract",{enumerable:!0,get:function(){return f.extract}});var n=R;Object.defineProperty(d,"QUOTE",{enumerable:!0,get:function(){return n.QUOTE}}),Object.defineProperty(d,"SEARCH",{enumerable:!0,get:function(){return n.SEARCH}}),Object.defineProperty(d,"CODE_BLOCK",{enumerable:!0,get:function(){return n.CODE_BLOCK}}),Object.defineProperty(d,"MATH_BLOCK",{enumerable:!0,get:function(){return n.MATH_BLOCK}}),Object.defineProperty(d,"CENTER",{enumerable:!0,get:function(){return n.CENTER}}),Object.defineProperty(d,"UNI_EMOJI",{enumerable:!0,get:function(){return n.UNI_EMOJI}}),Object.defineProperty(d,"EMOJI_CODE",{enumerable:!0,get:function(){return n.EMOJI_CODE}}),Object.defineProperty(d,"BOLD",{enumerable:!0,get:function(){return n.BOLD}}),Object.defineProperty(d,"SMALL",{enumerable:!0,get:function(){return n.SMALL}}),Object.defineProperty(d,"ITALIC",{enumerable:!0,get:function(){return n.ITALIC}}),Object.defineProperty(d,"STRIKE",{enumerable:!0,get:function(){return n.STRIKE}}),Object.defineProperty(d,"INLINE_CODE",{enumerable:!0,get:function(){return n.INLINE_CODE}}),Object.defineProperty(d,"MATH_INLINE",{enumerable:!0,get:function(){return n.MATH_INLINE}}),Object.defineProperty(d,"MENTION",{enumerable:!0,get:function(){return n.MENTION}}),Object.defineProperty(d,"HASHTAG",{enumerable:!0,get:function(){return n.HASHTAG}}),Object.defineProperty(d,"N_URL",{enumerable:!0,get:function(){return n.N_URL}}),Object.defineProperty(d,"LINK",{enumerable:!0,get:function(){return n.LINK}}),Object.defineProperty(d,"FN",{enumerable:!0,get:function(){return n.FN}}),Object.defineProperty(d,"PLAIN",{enumerable:!0,get:function(){return n.PLAIN}}),Object.defineProperty(d,"TEXT",{enumerable:!0,get:function(){return n.TEXT}})}(z)),z}W();function Y(d){return d.replace(/(^.)(.*)/,(f,n,l)=>`${n.toUpperCase()+l}`)}const ce=u.defineComponent({data(){return{debugMode:this.debugMode}},props:{tokens:{required:!0,type:Object},style:Object,className:String,class:String},methods:{getComponent:Y}}),re={key:0,style:{border:"solid 1px red"}};function fe(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock(u.Fragment,null,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(d.tokens,a=>(u.openBlock(),u.createBlock(u.resolveDynamicComponent(`${d.getComponent(a.type)}`),{style:u.normalizeStyle(d.style),className:d.className,token:a.props,children:a.children},null,8,["style","className","token","children"]))),256)),d.debugMode?(u.openBlock(),u.createElementBlock("div",re,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(d.tokens,a=>(u.openBlock(),u.createElementBlock("div",null,[u.createElementVNode("p",null,"Selected: "+u.toDisplayString(d.getComponent(a.type)),1),u.createElementVNode("pre",null,u.toDisplayString(a),1)]))),256))])):u.createCommentVNode("",!0)],64)}const oe=$(ce,[["render",fe]]),se={props:["children"]},ae={class:"bold"};function le(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("b",ae,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const ie=$(se,[["render",le]]),me={props:["children"]},pe={class:"italic"};function _e(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("i",pe,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const he=$(me,[["render",_e]]),be={props:["children"]},ye={class:"quote",style:{display:"block",margin:"8px",padding:"6px 0px 6px 12px",color:"var(--fg)","border-left":"solid 3px var(--fg)",opacity:"0.7"}};function ke(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("div",ye,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const ge=$(be,[["render",ke]]),$e={props:["children","token","style"]},Ne={class:"small",style:{opacity:"0.7"}};function Ce(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("small",Ne,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const Ee=$($e,[["render",Ce]]),Be={props:["children","class","className"]},Me={class:"center"};function Te(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("div",Me,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const Oe=$(Be,[["render",Te]]),Ie=u.defineComponent({inject:["emojis"],data(){return{emojis:this.emojis}},props:["token","children","className","class","style"]}),Le=["src"],je={key:1};function Se(d,f,n,l,o,e){return d.emojis[d.token.name]?(u.openBlock(),u.createElementBlock("img",{key:0,src:d.emojis[d.token.name].url,class:"emoji"},null,8,Le)):(u.openBlock(),u.createElementBlock("span",je,":"+u.toDisplayString(d.token.name)+":",1))}const qe=$(Ie,[["render",Se],["__scopeId","data-v-58a5bd6a"]]),Ae=u.defineComponent({props:["token","children","style","className"],inject:["domain"],data(){return{domain:this.domain,user:void 0}},watch:{token:{immediate:!0,async handler(){const d=await fetch(`https:/${this.token.host??this.domain}/api/users/search-by-username-and-host`,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({detail:!1,limit:1,username:this.token.username})});this.user=(await d.json())[0]}}}}),Pe=["href"],we=["src"];function De(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("a",{class:"mention",href:d.token.host??"https://"+d.domain+"/"+d.token.acct},[d.user?(u.openBlock(),u.createElementBlock("img",{key:0,class:"avatar",src:d.user.avatarUrl},null,8,we)):u.createCommentVNode("",!0),u.createTextVNode(u.toDisplayString(d.token.acct),1)],8,Pe)}const ze=$(Ae,[["render",De]]),Re={props:["children","token","style","className"]};function He(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{tokens:n.children},null,8,["tokens"])}const Ue=$(Re,[["render",He]]),Ke={props:["token","children","style","className"]},Fe={class:"block-code"};function Ve(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createTextVNode(u.toDisplayString(n.token.lang)+" ",1),u.createElementVNode("pre",Fe,[u.createTextVNode("    "),u.createElementVNode("code",null,u.toDisplayString(n.token.code),1),u.createTextVNode(`
  `)])],64)}const Je=$(Ke,[["render",Ve]]),Qe={props:["token","children","style","className"]},Xe={class:"inline-code"};function Ge(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("pre",Xe,u.toDisplayString(n.token.code),1)}const We=$(Qe,[["render",Ge]]),Ye={data(){return{currentQuery:this.token.query}},props:{token:{type:Object,required:!0},children:{type:Object}},methods:{search(){window.open("https://www.google.com/search?q="+encodeURIComponent(this.currentQuery),"_blank")}}},Ze={class:"search"};function xe(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("div",Ze,[u.withDirectives(u.createElementVNode("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=a=>o.currentQuery=a)},null,512),[[u.vModelText,o.currentQuery]]),u.createElementVNode("button",{onClick:f[1]||(f[1]=(...a)=>e.search&&e.search(...a))}," 検索 ")])}const ve=$(Ye,[["render",xe]]),ed={props:["token","children"]},dd={class:"strike"};function ud(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("del",dd,[u.createVNode(a,{tokens:n.children},null,8,["tokens"])])}const nd=$(ed,[["render",ud]]),td={props:["children","token","class","style"]};function cd(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("span",{style:u.normalizeStyle(n.style)},u.toDisplayString(n.token.emoji),5)}const rd=$(td,[["render",cd]]),fd={name:"Url.vue",props:{token:{type:Object},children:{type:Object}}},od=["href","textContent"];function sd(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("a",{class:"url",href:n.token.url,textContent:u.toDisplayString(n.token.url)},null,8,od)}const ad=$(fd,[["render",sd]]),ld=u.defineComponent({inject:["debugMode"],data(){return{debugMode:this.debugMode}},props:{token:{type:Object},children:{type:Object},className:{type:String},style:{type:Object},class:{type:String}}}),id={key:0},md=["href"];function pd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock(u.Fragment,null,[d.debugMode?(u.openBlock(),u.createElementBlock("span",id,"silent - "+u.toDisplayString(d.token.silent),1)):u.createCommentVNode("",!0),u.createElementVNode("a",{class:u.normalizeClass(["link",d.className]),href:d.token.url,style:u.normalizeStyle(d.style)},[u.createVNode(a,{tokens:d.children},null,8,["tokens"])],14,md)],64)}const _d=$(ld,[["render",pd]]),hd={props:["token","children","style"]},bd=["href"];function yd(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("a",{class:"hashtag",href:"/tags/"+n.token.hashtag},"#"+u.toDisplayString(n.token.hashtag),9,bd)}const kd=$(hd,[["render",yd]]),gd={methods:{getComponent:Y},props:["token","tokens","children","style","className"]};function $d(d,f,n,l,o,e){return u.openBlock(),u.createBlock(u.resolveDynamicComponent(e.getComponent(n.token.name)),{className:`Fn ${n.token.name} ${n.className??""}`,token:n.token,children:n.children,style:u.normalizeStyle(n.style)},null,8,["className","token","children","style"])}const Nd=$(gd,[["render",$d]]),Cd={props:["token","children","style","className"]};function Ed(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`fg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{color:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}const Bd=$(Cd,[["render",Ed]]),Md={props:["token","children","style","className"]};function Td(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`bg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{background:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}const Od=$(Md,[["render",Td]]),Id={props:["token","children","style","className"]};function Ld(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`fg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}const jd=$(Id,[["render",Ld]]),Sd={props:["token","children","style","className"]};function qd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`blur ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}const Ad=$(Sd,[["render",qd]]),Pd={props:["token","children","style","className"]};function wd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`flip ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`scale(${n.token.args.h?1:-1}, ${n.token.args.v?-1:1})`},n.style])},null,8,["className","tokens","style"])}const Dd=$(Pd,[["render",wd]]),zd={props:["token","children","style","className"]};function Rd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`scale(${n.token.args.x}, ${n.token.args.y})`},n.style])},null,8,["className","tokens","style"])}const Hd=$(zd,[["render",Rd]]),Ud={props:["token","children","style","className"]};function Kd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`translateX(${n.token.args.x}em) translateY(${n.token.args.y}em)`},n.style])},null,8,["className","tokens","style"])}const Fd=$(Ud,[["render",Kd]]),Vd={props:["token","children","style","className"]};function Jd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"200%"},n.style])},null,8,["className","tokens","style"])}const Qd=$(Vd,[["render",Jd]]),Xd={props:["token","children","style","className"]};function Gd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"300%"},n.style])},null,8,["className","tokens","style"])}const Wd=$(Xd,[["render",Gd]]),Yd={props:["token","children","style","className"]};function Zd(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"400%"},n.style])},null,8,["className","tokens","style"])}const xd=$(Yd,[["render",Zd]]),vd={props:["token","children","style","className"]};function eu(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.75s"} linear 0s infinite normal none running mfm-jump`},n.style])},null,8,["className","tokens","style"])}const du=$(vd,[["render",eu]]),uu={props:["token","children","style","className"]};function nu(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal both running tada`},n.style])},null,8,["className","tokens","style"])}const tu=$(uu,[["render",nu]]),cu={props:["token","children","style","className"]};function ru(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal both running mfm-rubberBand`},n.style])},null,8,["className","tokens","style"])}const fu=$(cu,[["render",ru]]),ou={props:["token","children","style","className"]};function su(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1.5s"} linear 0s infinite normal none running mfm-spin`},n.style])},null,8,["className","tokens","style"])}const au=$(ou,[["render",su]]),lu={props:["token","children","style","className"]};function iu(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal none running mfm-twitch`},n.style])},null,8,["className","tokens","style"])}const mu=$(lu,[["render",iu]]),pu={props:["token","children","style","className"]};function _u(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.5s"} ease 0s infinite normal none running mfm-shake`},n.style])},null,8,["className","tokens","style"])}const hu=$(pu,[["render",_u]]),bu={props:["token","children","style","className"]};function yu(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.75s"} linear 0s infinite normal none running mfm-bounce`,transformOrigin:"center bottom"},n.style])},null,8,["className","tokens","style"])}const ku=$(bu,[["render",yu]]),gu={props:["token","children","style","className"]};function $u(d,f,n,l,o,e){const a=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(a,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.5s"} ease 0s infinite normal none running mfm-rainbow`},n.style])},null,8,["className","tokens","style"])}const Nu=$(gu,[["render",$u]]),Cu={props:["children","token","style","className"],computed:{ruby(){const d=this.children[0].props.text.split(" ");return{body:d[0],yomi:d[1]}}}};function Eu(d,f,n,l,o,e){return u.openBlock(),u.createElementBlock("ruby",null,[u.createTextVNode(u.toDisplayString(e.ruby.body)+" ",1),u.createElementVNode("rt",null,u.toDisplayString(e.ruby.yomi),1)])}const Bu=$(Cu,[["render",Eu]]);return{install:(d,f)=>{d.component("MfmComponent",oe).component("Bold",ie).component("Italic",he).component("Quote",ge).component("Small",Ee).component("Text",ee).component("Center",Oe).component("EmojiCode",qe).component("Mention",ze).component("Plain",Ue).component("BlockCode",Je).component("InlineCode",We).component("Search",ve).component("Strike",nd).component("UnicodeEmoji",rd).component("Url",ad).component("Link",_d).component("Hashtag",kd).component("Fn",Nd).component("Fg",Bd).component("Bg",Od).component("Font",jd).component("Blur",Ad).component("Flip",Dd).component("Scale",Hd).component("Position",Fd).component("X2",Qd).component("X3",Wd).component("X4",xd).component("Jump",du).component("Tada",tu).component("Jelly",fu).component("Spin",au).component("Twitch",mu).component("Shake",hu).component("Bounce",ku).component("Rainbow",Nu).component("Ruby",Bu)}}});
