(function(e,w){typeof exports=="object"&&typeof module<"u"?module.exports=w(require("vue")):typeof define=="function"&&define.amd?define(["vue"],w):(e=typeof globalThis<"u"?globalThis:e||self,e.MMFMRenderer=w(e.Vue))})(this,function(e){"use strict";const w={key:0},de=e.defineComponent({__name:"Text",props:{children:{},token:{},plain:{type:Boolean,default:!1},className:{},nowrap:{type:Boolean,default:!1},note:{},style:{}},setup(u){const n=u,r=e.computed(()=>n.plain?[n.token.text.replace(/\n/g," ")]:n.token.text.split(/\r\n|\n|\r/)),f=(a,d)=>d+1!==r.value.length;return(a,d)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(g,C)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("span",{class:e.normalizeClass(["text",[a.className,a.$attrs.class]]),style:e.normalizeStyle(a.style)},e.toDisplayString(g),7),f(g,C)?(e.openBlock(),e.createElementBlock("br",w)):e.createCommentVNode("",!0)],64))),256))}});var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z={},I={},q={},D={},F={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createLanguage=u.lazy=u.lineEnd=u.lineBegin=u.char=u.newline=u.crlf=u.lf=u.cr=u.notMatch=u.alt=u.seq=u.regexp=u.str=u.Parser=u.failure=u.success=void 0;function n(y,p){return{success:!0,value:p,index:y}}u.success=n;function r(){return{success:!1}}u.failure=r;class f{constructor(p,m){this.handler=(t,o,c)=>{if(c.trace&&this.name!=null){const s=`${o}`;console.log(`${s.padEnd(6," ")}enter ${this.name}`);const _=p(t,o,c);if(_.success){const l=`${o}:${_.index}`;console.log(`${l.padEnd(6," ")}match ${this.name}`)}else{const l=`${o}`;console.log(`${l.padEnd(6," ")}fail ${this.name}`)}return _}return p(t,o,c)},this.name=m}map(p){return new f((m,t,o)=>{const c=this.handler(m,t,o);return c.success?n(c.index,p(c.value)):c})}text(){return new f((p,m,t)=>{const o=this.handler(p,m,t);if(!o.success)return o;const c=p.slice(m,o.index);return n(o.index,c)})}many(p){return new f((m,t,o)=>{let c,s=t;const _=[];for(;s<m.length&&(c=this.handler(m,s,o),!!c.success);)s=c.index,_.push(c.value);return _.length<p?r():n(s,_)})}sep(p,m){if(m<1)throw new Error('"min" must be a value greater than or equal to 1.');return g([this,g([p,this],1).many(m-1)]).map(t=>[t[0],...t[1]])}option(){return C([this,N(null)])}}u.Parser=f;function a(y){return new f((p,m,t)=>p.length-m<y.length||p.substr(m,y.length)!==y?r():n(m+y.length,y))}u.str=a;function d(y){const p=RegExp(`^(?:${y.source})`,y.flags);return new f((m,t,o)=>{const c=m.slice(t),s=p.exec(c);return s==null?r():n(t+s[0].length,s[0])})}u.regexp=d;function g(y,p){return new f((m,t,o)=>{let c,s=t;const _=[];for(let l=0;l<y.length;l++){if(c=y[l].handler(m,s,o),!c.success)return c;s=c.index,_.push(c.value)}return n(s,p!=null?_[p]:_)})}u.seq=g;function C(y){return new f((p,m,t)=>{let o;for(let c=0;c<y.length;c++)if(o=y[c].handler(p,m,t),o.success)return o;return r()})}u.alt=C;function N(y){return new f((p,m,t)=>n(m,y))}function T(y){return new f((p,m,t)=>y.handler(p,m,t).success?r():n(m,null))}u.notMatch=T,u.cr=a("\r"),u.lf=a(`
`),u.crlf=a(`\r
`),u.newline=C([u.crlf,u.cr,u.lf]),u.char=new f((y,p,m)=>{if(y.length-p<1)return r();const t=y.charAt(p);return n(p+1,t)}),u.lineBegin=new f((y,p,m)=>p===0||u.cr.handler(y,p-1,m).success||u.lf.handler(y,p-1,m).success?n(p,null):r()),u.lineEnd=new f((y,p,m)=>p===y.length||u.cr.handler(y,p,m).success||u.lf.handler(y,p,m).success?n(p,null):r());function b(y){const p=new f((m,t,o)=>(p.handler=y().handler,p.handler(m,t,o)));return p}u.lazy=b;function O(y){const p={};for(const m of Object.keys(y))p[m]=b(()=>{const t=y[m](p);if(t==null)throw new Error("syntax must return a parser.");return t.name=m,t});return p}u.createLanguage=O})(F);var L={},R={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.isMfmBlock=void 0;const n=["quote","search","blockCode","mathBlock","center"];function r(i){return n.includes(i.type)}u.isMfmBlock=r;const f=i=>({type:"quote",children:i});u.QUOTE=f;const a=(i,E)=>({type:"search",props:{query:i,content:E}});u.SEARCH=a;const d=(i,E)=>({type:"blockCode",props:{code:i,lang:E}});u.CODE_BLOCK=d;const g=i=>({type:"mathBlock",props:{formula:i}});u.MATH_BLOCK=g;const C=i=>({type:"center",children:i});u.CENTER=C;const N=i=>({type:"unicodeEmoji",props:{emoji:i}});u.UNI_EMOJI=N;const T=i=>({type:"emojiCode",props:{name:i}});u.EMOJI_CODE=T;const b=i=>({type:"bold",children:i});u.BOLD=b;const O=i=>({type:"small",children:i});u.SMALL=O;const y=i=>({type:"italic",children:i});u.ITALIC=y;const p=i=>({type:"strike",children:i});u.STRIKE=p;const m=i=>({type:"inlineCode",props:{code:i}});u.INLINE_CODE=m;const t=i=>({type:"mathInline",props:{formula:i}});u.MATH_INLINE=t;const o=(i,E,M)=>({type:"mention",props:{username:i,host:E,acct:M}});u.MENTION=o;const c=i=>({type:"hashtag",props:{hashtag:i}});u.HASHTAG=c;const s=(i,E)=>{const M={type:"url",props:{url:i}};return E&&(M.props.brackets=E),M};u.N_URL=s;const _=(i,E,M)=>({type:"link",props:{silent:i,url:E},children:M});u.LINK=_;const l=(i,E,M)=>({type:"fn",props:{name:i,args:E},children:M});u.FN=l;const h=i=>({type:"plain",children:[(0,u.TEXT)(i)]});u.PLAIN=h;const k=i=>({type:"text",props:{text:i}});u.TEXT=k})(R),Object.defineProperty(L,"__esModule",{value:!0}),L.inspectOne=L.stringifyTree=L.stringifyNode=L.mergeText=void 0;const H=R;function ue(u){const n=[],r=[];function f(){r.length>0&&(n.push((0,H.TEXT)(r.join(""))),r.length=0)}const a=u.flat(1);for(const d of a)typeof d=="string"?r.push(d):!Array.isArray(d)&&d.type==="text"?r.push(d.props.text):(f(),n.push(d));return f(),n}L.mergeText=ue;function K(u){var n;switch(u.type){case"quote":return S(u.children).split(`
`).map(r=>`> ${r}`).join(`
`);case"search":return u.props.content;case"blockCode":return`\`\`\`${(n=u.props.lang)!==null&&n!==void 0?n:""}
${u.props.code}
\`\`\``;case"mathBlock":return`\\[
${u.props.formula}
\\]`;case"center":return`<center>
${S(u.children)}
</center>`;case"emojiCode":return`:${u.props.name}:`;case"unicodeEmoji":return u.props.emoji;case"bold":return`**${S(u.children)}**`;case"small":return`<small>${S(u.children)}</small>`;case"italic":return`<i>${S(u.children)}</i>`;case"strike":return`~~${S(u.children)}~~`;case"inlineCode":return`\`${u.props.code}\``;case"mathInline":return`\\(${u.props.formula}\\)`;case"mention":return u.props.acct;case"hashtag":return`#${u.props.hashtag}`;case"url":return u.props.brackets?`<${u.props.url}>`:u.props.url;case"link":return`${u.props.silent?"?":""}[${S(u.children)}](${u.props.url})`;case"fn":{const r=Object.keys(u.props.args).map(a=>{const d=u.props.args[a];return d===!0?a:`${a}=${d}`}),f=r.length>0?"."+r.join(","):"";return`$[${u.props.name}${f} ${S(u.children)}]`}case"plain":return`<plain>
${S(u.children)}
</plain>`;case"text":return u.props.text}throw new Error("unknown mfm node")}L.stringifyNode=K;var P;(function(u){u[u.none=0]="none",u[u.inline=1]="inline",u[u.block=2]="block"})(P||(P={}));function S(u){const n=[];let r=P.none;for(const f of u){let a=!0;(0,H.isMfmBlock)(f)?(r===P.none&&(a=!1),r=P.block):((r===P.none||r===P.inline)&&(a=!1),r=P.inline),a&&n.push((0,H.TEXT)(`
`)),n.push(f)}return n.map(f=>K(f)).join("")}L.stringifyTree=S;function J(u,n){if(n(u),u.children!=null)for(const r of u.children)J(r,n)}L.inspectOne=J;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var X;function ne(){if(X)return D;X=1;var u=j&&j.__createBinding||(Object.create?function(t,o,c,s){s===void 0&&(s=c);var _=Object.getOwnPropertyDescriptor(o,c);(!_||("get"in _?!o.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(t,s,_)}:function(t,o,c,s){s===void 0&&(s=c),t[s]=o[c]}),n=j&&j.__setModuleDefault||(Object.create?function(t,o){Object.defineProperty(t,"default",{enumerable:!0,value:o})}:function(t,o){t.default=o}),r=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var c in t)c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)&&u(o,t,c);return n(o,t),o},f=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D,"__esModule",{value:!0}),D.language=void 0;const a=r(Y()),d=r(F),g=L,C=f(U),N=d.regexp(/[\u0020\u3000\t]/),T=d.regexp(/[a-z0-9]/i),b=d.alt([d.crlf,d.cr,d.lf]);function O(t){return new d.Parser((o,c,s)=>{const _=[];let l=c;for(let h=0;h<t.length;h++){const k=t[h].handler(o,l,s);if(!k.success)return l===c?d.failure():d.success(l,o.slice(c,l));_.push(k.value),l=k.index}return d.success(l,_)})}const y=new d.Parser((t,o,c)=>c.linkLabel?d.failure():d.success(o,null)),p=new d.Parser((t,o,c)=>c.depth<c.nestLimit?d.success(o,null):d.failure());function m(t,o){const c=d.alt([d.seq([p,t],1),o??d.char]);return new d.Parser((s,_,l)=>{l.depth++;const h=c.handler(s,_,l);return l.depth--,h})}return D.language=d.createLanguage({fullParser:t=>t.full.many(0),simpleParser:t=>t.simple.many(0),full:t=>d.alt([t.unicodeEmoji,t.centerTag,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.codeBlock,t.inlineCode,t.quote,t.mathBlock,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.search,t.text]),simple:t=>d.alt([t.unicodeEmoji,t.emojiCode,t.text]),inline:t=>d.alt([t.unicodeEmoji,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.inlineCode,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.text]),quote:t=>{const o=d.seq([d.str(">"),N.option(),d.seq([d.notMatch(b),d.char],1).many(0).text()],2).sep(b,1),c=d.seq([b.option(),b.option(),d.lineBegin,o,b.option(),b.option()],3);return new d.Parser((s,_,l)=>{let h;if(h=c.handler(s,_,l),!h.success)return h;const k=h.value,i=h.index;return k.length===1&&k[0].length===0?d.failure():(h=m(t.fullParser).many(0).handler(k.join(`
`),0,l),h.success?d.success(i,a.QUOTE((0,g.mergeText)(h.value))):h)})},codeBlock:t=>{const o=d.str("```");return d.seq([b.option(),d.lineBegin,o,d.seq([d.notMatch(b),d.char],1).many(0),b,d.seq([d.notMatch(d.seq([b,o,d.lineEnd])),d.char],1).many(1),b,o,d.lineEnd,b.option()]).map(c=>{const s=c[3].join("").trim(),_=c[5].join("");return a.CODE_BLOCK(_,s.length>0?s:null)})},mathBlock:t=>{const o=d.str("\\["),c=d.str("\\]");return d.seq([b.option(),d.lineBegin,o,b.option(),d.seq([d.notMatch(d.seq([b.option(),c])),d.char],1).many(1),b.option(),c,d.lineEnd,b.option()]).map(s=>{const _=s[4].join("");return a.MATH_BLOCK(_)})},centerTag:t=>{const o=d.str("<center>"),c=d.str("</center>");return d.seq([b.option(),d.lineBegin,o,b.option(),d.seq([d.notMatch(d.seq([b.option(),c])),m(t.inline)],1).many(1),b.option(),c,d.lineEnd,b.option()]).map(s=>a.CENTER((0,g.mergeText)(s[4])))},big:t=>{const o=d.str("***");return O([o,d.seq([d.notMatch(o),m(t.inline)],1).many(1),o]).map(c=>typeof c=="string"?c:a.FN("tada",{},(0,g.mergeText)(c[1])))},boldAsta:t=>{const o=d.str("**");return O([o,d.seq([d.notMatch(o),m(t.inline)],1).many(1),o]).map(c=>typeof c=="string"?c:a.BOLD((0,g.mergeText)(c[1])))},boldTag:t=>{const o=d.str("<b>"),c=d.str("</b>");return O([o,d.seq([d.notMatch(c),m(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:a.BOLD((0,g.mergeText)(s[1])))},boldUnder:t=>{const o=d.str("__");return d.seq([o,d.alt([T,N]).many(1),o]).map(c=>a.BOLD((0,g.mergeText)(c[1])))},smallTag:t=>{const o=d.str("<small>"),c=d.str("</small>");return O([o,d.seq([d.notMatch(c),m(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:a.SMALL((0,g.mergeText)(s[1])))},italicTag:t=>{const o=d.str("<i>"),c=d.str("</i>");return O([o,d.seq([d.notMatch(c),m(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:a.ITALIC((0,g.mergeText)(s[1])))},italicAsta:t=>{const o=d.str("*"),c=d.seq([o,d.alt([T,N]).many(1),o]);return new d.Parser((s,_,l)=>{const h=c.handler(s,_,l);if(!h.success)return d.failure();const k=s.slice(0,_);return/[a-z0-9]$/i.test(k)?d.failure():d.success(h.index,a.ITALIC((0,g.mergeText)(h.value[1])))})},italicUnder:t=>{const o=d.str("_"),c=d.seq([o,d.alt([T,N]).many(1),o]);return new d.Parser((s,_,l)=>{const h=c.handler(s,_,l);if(!h.success)return d.failure();const k=s.slice(0,_);return/[a-z0-9]$/i.test(k)?d.failure():d.success(h.index,a.ITALIC((0,g.mergeText)(h.value[1])))})},strikeTag:t=>{const o=d.str("<s>"),c=d.str("</s>");return O([o,d.seq([d.notMatch(c),m(t.inline)],1).many(1),c]).map(s=>typeof s=="string"?s:a.STRIKE((0,g.mergeText)(s[1])))},strikeWave:t=>{const o=d.str("~~");return O([o,d.seq([d.notMatch(d.alt([o,b])),m(t.inline)],1).many(1),o]).map(c=>typeof c=="string"?c:a.STRIKE((0,g.mergeText)(c[1])))},unicodeEmoji:t=>{const o=RegExp(C.default.source);return d.regexp(o).map(c=>a.UNI_EMOJI(c))},plainTag:t=>{const o=d.str("<plain>"),c=d.str("</plain>");return d.seq([o,b.option(),d.seq([d.notMatch(d.seq([b.option(),c])),d.char],1).many(1).text(),b.option(),c],2).map(s=>a.PLAIN(s))},fn:t=>{const o=new d.Parser((l,h,k)=>{const i=d.regexp(/[a-z0-9_]+/i).handler(l,h,k);return i.success?d.success(i.index,i.value):i}),c=d.seq([d.regexp(/[a-z0-9_]+/i),d.seq([d.str("="),d.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(l=>({k:l[0],v:l[1]!=null?l[1]:!0})),s=d.seq([d.str("."),c.sep(d.str(","),1)],1).map(l=>{const h={};for(const k of l)h[k.k]=k.v;return h}),_=d.str("]");return O([d.str("$["),o,s.option(),d.str(" "),d.seq([d.notMatch(_),m(t.inline)],1).many(1),_]).map(l=>{if(typeof l=="string")return l;const h=l[1],k=l[2]||{},i=l[4];return a.FN(h,k,(0,g.mergeText)(i))})},inlineCode:t=>{const o=d.str("`");return d.seq([o,d.seq([d.notMatch(d.alt([o,d.str("´"),b])),d.char],1).many(1),o]).map(c=>a.INLINE_CODE(c[1].join("")))},mathInline:t=>{const o=d.str("\\("),c=d.str("\\)");return d.seq([o,d.seq([d.notMatch(d.alt([c,b])),d.char],1).many(1),c]).map(s=>a.MATH_INLINE(s[1].join("")))},mention:t=>{const o=d.seq([y,d.str("@"),d.regexp(/[a-z0-9_-]+/i),d.seq([d.str("@"),d.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new d.Parser((c,s,_)=>{let l;if(l=o.handler(c,s,_),!l.success)return d.failure();const h=c.slice(0,s);if(/[a-z0-9]$/i.test(h))return d.failure();let k=!1;const i=l.index,E=l.value[2],M=l.value[3];let B=M;M!=null&&(l=/[.-]+$/.exec(M),l!=null&&(B=M.slice(0,-1*l[0].length),B.length===0&&(k=!0,B=null)));let A=E;if(l=/-+$/.exec(E),l!=null&&(B==null?A=E.slice(0,-1*l[0].length):k=!0),(A.length===0||A[0]==="-")&&(k=!0),B!=null&&/^[.-]/.test(B)&&(k=!0),k)return d.success(i,c.slice(s,i));const ee=B!=null?`@${A}@${B}`:`@${A}`;return d.success(s+ee.length,a.MENTION(A,B,ee))})},hashtag:t=>{const o=d.str("#"),c=d.seq([d.notMatch(d.alt([d.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),N,b])),d.char],1),s=d.lazy(()=>d.alt([d.seq([d.str("("),m(s,c).many(0),d.str(")")]),d.seq([d.str("["),m(s,c).many(0),d.str("]")]),d.seq([d.str("「"),m(s,c).many(0),d.str("」")]),d.seq([d.str("（"),m(s,c).many(0),d.str("）")]),c])),_=d.seq([y,o,s.many(1).text()],2);return new d.Parser((l,h,k)=>{const i=_.handler(l,h,k);if(!i.success)return d.failure();const E=l.slice(0,h);if(/[a-z0-9]$/i.test(E))return d.failure();const M=i.index,B=i.value;return/^[0-9]+$/.test(B)?d.failure():d.success(M,a.HASHTAG(B))})},emojiCode:t=>{const o=d.notMatch(d.regexp(/[a-z0-9]/i)),c=d.str(":");return d.seq([d.alt([d.lineBegin,o]),c,d.regexp(/[a-z0-9_+-]+/i),c,d.alt([d.lineEnd,o])],2).map(s=>a.EMOJI_CODE(s))},link:t=>{const o=new d.Parser((s,_,l)=>{l.linkLabel=!0;const h=t.inline.handler(s,_,l);return l.linkLabel=!1,h}),c=d.str("]");return d.seq([y,d.alt([d.str("?["),d.str("[")]),d.seq([d.notMatch(d.alt([c,b])),m(o)],1).many(1),c,d.str("("),d.alt([t.urlAlt,t.url]),d.str(")")]).map(s=>{const _=s[1]==="?[",l=s[2],h=s[5];return a.LINK(_,h.props.url,(0,g.mergeText)(l))})},url:t=>{const o=d.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),c=d.lazy(()=>d.alt([d.seq([d.str("("),m(c,o).many(0),d.str(")")]),d.seq([d.str("["),m(c,o).many(0),d.str("]")]),o])),s=d.seq([y,d.regexp(/https?:\/\//),c.many(1).text()]);return new d.Parser((_,l,h)=>{let k;if(k=s.handler(_,l,h),!k.success)return d.failure();const i=k.index;let E=i;const M=k.value[1];let B=k.value[2];return k=/[.,]+$/.exec(B),k!=null&&(E-=k[0].length,B=B.slice(0,-1*k[0].length),B.length===0)?d.success(i,_.slice(l,i)):d.success(E,a.N_URL(M+B,!1))})},urlAlt:t=>{const o=d.str("<"),c=d.str(">"),s=d.seq([y,o,d.regexp(/https?:\/\//),d.seq([d.notMatch(d.alt([c,N])),d.char],1).many(1),c]).text();return new d.Parser((_,l,h)=>{const k=s.handler(_,l,h);if(!k.success)return d.failure();const i=k.value.slice(1,k.value.length-1);return d.success(k.index,a.N_URL(i,!0))})},search:t=>{const o=d.alt([d.regexp(/\[(検索|search)\]/i),d.regexp(/(検索|search)/i)]);return d.seq([b.option(),d.lineBegin,d.seq([d.notMatch(d.alt([b,d.seq([N,o,d.lineEnd])])),d.char],1).many(1),N,o,d.lineEnd,b.option()]).map(c=>{const s=c[2].join("");return a.SEARCH(s,`${s}${c[3]}${c[4]}`)})},text:t=>d.char}),D}var Q;function te(){if(Q)return q;Q=1,Object.defineProperty(q,"__esModule",{value:!0}),q.simpleParser=q.fullParser=void 0;const u=ne(),n=L;function r(a,d){const g=u.language.fullParser.handler(a,0,{nestLimit:d.nestLimit!=null?d.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,n.mergeText)(g.value)}q.fullParser=r;function f(a){const d=u.language.simpleParser.handler(a,0,{});return(0,n.mergeText)(d.value)}return q.simpleParser=f,q}var G;function ce(){if(G)return I;G=1,Object.defineProperty(I,"__esModule",{value:!0}),I.extract=I.inspect=I.toString=I.parseSimple=I.parse=void 0;const u=te(),n=L;function r(C,N={}){return(0,u.fullParser)(C,{nestLimit:N.nestLimit})}I.parse=r;function f(C){return(0,u.simpleParser)(C)}I.parseSimple=f;function a(C){return Array.isArray(C)?(0,n.stringifyTree)(C):(0,n.stringifyNode)(C)}I.toString=a;function d(C,N){if(Array.isArray(C))for(const T of C)(0,n.inspectOne)(T,N);else(0,n.inspectOne)(C,N)}I.inspect=d;function g(C,N){const T=[];return d(C,b=>{N(b)&&T.push(b)}),T}return I.extract=g,I}var W;function Y(){return W||(W=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.extract=u.inspect=u.toString=u.parseSimple=u.parse=void 0;var n=ce();Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(u,"parseSimple",{enumerable:!0,get:function(){return n.parseSimple}}),Object.defineProperty(u,"toString",{enumerable:!0,get:function(){return n.toString}}),Object.defineProperty(u,"inspect",{enumerable:!0,get:function(){return n.inspect}}),Object.defineProperty(u,"extract",{enumerable:!0,get:function(){return n.extract}});var r=R;Object.defineProperty(u,"QUOTE",{enumerable:!0,get:function(){return r.QUOTE}}),Object.defineProperty(u,"SEARCH",{enumerable:!0,get:function(){return r.SEARCH}}),Object.defineProperty(u,"CODE_BLOCK",{enumerable:!0,get:function(){return r.CODE_BLOCK}}),Object.defineProperty(u,"MATH_BLOCK",{enumerable:!0,get:function(){return r.MATH_BLOCK}}),Object.defineProperty(u,"CENTER",{enumerable:!0,get:function(){return r.CENTER}}),Object.defineProperty(u,"UNI_EMOJI",{enumerable:!0,get:function(){return r.UNI_EMOJI}}),Object.defineProperty(u,"EMOJI_CODE",{enumerable:!0,get:function(){return r.EMOJI_CODE}}),Object.defineProperty(u,"BOLD",{enumerable:!0,get:function(){return r.BOLD}}),Object.defineProperty(u,"SMALL",{enumerable:!0,get:function(){return r.SMALL}}),Object.defineProperty(u,"ITALIC",{enumerable:!0,get:function(){return r.ITALIC}}),Object.defineProperty(u,"STRIKE",{enumerable:!0,get:function(){return r.STRIKE}}),Object.defineProperty(u,"INLINE_CODE",{enumerable:!0,get:function(){return r.INLINE_CODE}}),Object.defineProperty(u,"MATH_INLINE",{enumerable:!0,get:function(){return r.MATH_INLINE}}),Object.defineProperty(u,"MENTION",{enumerable:!0,get:function(){return r.MENTION}}),Object.defineProperty(u,"HASHTAG",{enumerable:!0,get:function(){return r.HASHTAG}}),Object.defineProperty(u,"N_URL",{enumerable:!0,get:function(){return r.N_URL}}),Object.defineProperty(u,"LINK",{enumerable:!0,get:function(){return r.LINK}}),Object.defineProperty(u,"FN",{enumerable:!0,get:function(){return r.FN}}),Object.defineProperty(u,"PLAIN",{enumerable:!0,get:function(){return r.PLAIN}}),Object.defineProperty(u,"TEXT",{enumerable:!0,get:function(){return r.TEXT}})}(z)),z}var Z=Y();function re(u,n){return u==null||u===""?[]:n?Z.parseSimple(u):Z.parse(u)}function V(u){return u.replace(/(^.)(.*)/,(n,r,f)=>`${r.toUpperCase()+f}`)}function $(u){if(u&&/^\-?[0-9.]+s$/.test(u))return u}const oe={key:0,style:{border:"solid 1px red"}},x=e.defineComponent({__name:"Mfm",props:{tokens:{},style:{},className:{},class:{},debug:{type:Boolean}},setup(u){const r=!!u.debug;return(f,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.tokens,d=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(`${e.unref(V)(d.type)}`),{style:e.normalizeStyle(f.style),className:f.className,token:d.props,children:d.children},null,8,["style","className","token","children"]))),256)),e.unref(r)?(e.openBlock(),e.createElementBlock("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.tokens,d=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("p",null,"Selected: "+e.toDisplayString(e.unref(V)(d.type)),1),e.createElementVNode("pre",null,e.toDisplayString(d),1)]))),256))])):e.createCommentVNode("",!0)],64))}}),fe={class:"bold"},se=e.defineComponent({__name:"Bold",props:{children:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("b",fe,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),ae={class:"italic"},le=e.defineComponent({__name:"Italic",props:{children:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("i",ae,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),ie={class:"quote",style:{display:"block",margin:"8px",padding:"6px 0px 6px 12px",color:"var(--fg)","border-left":"solid 3px var(--fg)",opacity:"0.7"}},me=e.defineComponent({__name:"Quote",props:{children:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("div",ie,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),pe={class:"small",style:{opacity:"0.7"}},_e=e.defineComponent({__name:"Small",props:{children:{},token:{},style:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("small",pe,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),he={class:"center"},be=e.defineComponent({__name:"Center",props:{children:{},class:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("div",he,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),ye=["src"],ke={key:1},ge=e.defineComponent({__name:"EmojiCode",props:{token:{},children:{},className:{},class:{},style:{}},setup(u){const n=e.inject("emojis",{});return(r,f)=>e.unref(n)[r.token.name]?(e.openBlock(),e.createElementBlock("img",{key:0,src:e.unref(n)[r.token.name].url,class:"emoji"},null,8,ye)):(e.openBlock(),e.createElementBlock("span",ke,":"+e.toDisplayString(r.token.name)+":",1))}}),v=(u,n)=>{const r=u.__vccOpts||u;for(const[f,a]of n)r[f]=a;return r},Ce=v(ge,[["__scopeId","data-v-0407b1c0"]]),Ne=["href"],Ee=["src"],$e=e.defineComponent({__name:"Mention",props:{token:{},children:{},style:{},className:{}},setup(u){const n=u,r=e.inject("domain",""),f=e.ref(void 0);return e.watch(()=>n.token,async()=>{const a=await fetch(`https:/${n.token.host??r.value}/api/users/search-by-username-and-host`,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({detail:!1,limit:1,username:n.token.username})});f.value=(await a.json())[0]},{immediate:!0}),(a,d)=>(e.openBlock(),e.createElementBlock("a",{class:"mention",href:a.token.host??"https://"+e.unref(r)+"/"+a.token.acct},[f.value?(e.openBlock(),e.createElementBlock("img",{key:0,class:"avatar",src:f.value.avatarUrl},null,8,Ee)):e.createCommentVNode("",!0),e.createTextVNode(e.toDisplayString(a.token.acct),1)],8,Ne))}}),Be=e.defineComponent({__name:"Plain",props:{children:{},token:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{tokens:n.children},null,8,["tokens"])}}}),Me={class:"block-code"},Te=e.defineComponent({__name:"BlockCode",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createTextVNode(e.toDisplayString(n.token.lang)+" ",1),e.createElementVNode("pre",Me,[e.createTextVNode("    "),e.createElementVNode("code",null,e.toDisplayString(n.token.code),1),e.createTextVNode(`
  `)])],64))}}),Oe={class:"inline-code"},Ie=e.defineComponent({__name:"InlineCode",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>(e.openBlock(),e.createElementBlock("pre",Oe,e.toDisplayString(n.token.code),1))}}),Le={class:"search"},Se=e.defineComponent({__name:"Search",props:{token:{},children:{}},setup(u){const n=u,r=e.ref(n.token.query),f=()=>{window.open("https://www.google.com/search?q="+encodeURIComponent(r.value),"_blank")};return(a,d)=>(e.openBlock(),e.createElementBlock("div",Le,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=g=>r.value=g)},null,512),[[e.vModelText,r.value]]),e.createElementVNode("button",{onClick:f},"検索")]))}}),je={class:"strike"},Pe=e.defineComponent({__name:"Strike",props:{token:{},children:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("del",je,[e.createVNode(f,{tokens:n.children},null,8,["tokens"])])}}}),qe=e.defineComponent({__name:"UnicodeEmoji",props:{children:{},token:{},class:{},style:{}},setup(u){return(n,r)=>(e.openBlock(),e.createElementBlock("span",{style:e.normalizeStyle(n.style)},e.toDisplayString(n.token.emoji),5))}}),Ae=["href","textContent"],we=e.defineComponent({__name:"Url",props:{token:{},children:{}},setup(u){return(n,r)=>(e.openBlock(),e.createElementBlock("a",{class:"url",href:n.token.url,textContent:e.toDisplayString(n.token.url)},null,8,Ae))}}),De={key:0},ze=["href"],Re=e.defineComponent({__name:"Link",props:{token:{},children:{},className:{},style:{},class:{}},setup(u){const n=e.inject("debugMode",!1);return(r,f)=>{const a=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(n)?(e.openBlock(),e.createElementBlock("span",De,"silent - "+e.toDisplayString(r.token.silent),1)):e.createCommentVNode("",!0),e.createElementVNode("a",{class:e.normalizeClass(["link",r.className]),href:r.token.url,style:e.normalizeStyle(r.style)},[e.createVNode(a,{tokens:r.children},null,8,["tokens"])],14,ze)],64)}}}),He=["href"],Ue=e.defineComponent({__name:"Hashtag",props:{token:{},children:{},style:{}},setup(u){return(n,r)=>(e.openBlock(),e.createElementBlock("a",{class:"hashtag",href:"/tags/"+n.token.hashtag},"#"+e.toDisplayString(n.token.hashtag),9,He))}}),Ve=e.defineComponent({__name:"Fn",props:{token:{},tokens:{},children:{},style:{},className:{}},setup(u){return(n,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(V)(n.token.name)),{className:`Fn ${n.token.name} ${n.className??""}`,token:n.token,children:n.children,style:e.normalizeStyle(n.style)},null,8,["className","token","children","style"]))}}),Fe=e.defineComponent({__name:"Fg",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`fg ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{color:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}}}),Ke=e.defineComponent({__name:"Bg",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`bg ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{background:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}}}),Je=e.defineComponent({__name:"Font",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`fg ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}}}),Xe=e.defineComponent({__name:"Blur",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`blur ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}}}),Qe=e.defineComponent({__name:"Flip",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`flip ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{transform:`scale(${n.token.args.h?1:-1}, ${n.token.args.v?-1:1})`},n.style])},null,8,["className","tokens","style"])}}}),Ge=e.defineComponent({__name:"Scale",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{transform:`scale(${n.token.args.x}, ${n.token.args.y})`},n.style])},null,8,["className","tokens","style"])}}}),We=e.defineComponent({__name:"Position",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`position ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{transform:`translateX(${n.token.args.x}em) translateY(${n.token.args.y}em)`},n.style])},null,8,["className","tokens","style"])}}}),Ye=e.defineComponent({__name:"X2",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{fontSize:"200%"},n.style])},null,8,["className","tokens","style"])}}}),Ze=e.defineComponent({__name:"X3",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{fontSize:"300%"},n.style])},null,8,["className","tokens","style"])}}}),xe=e.defineComponent({__name:"X4",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{fontSize:"400%"},n.style])},null,8,["className","tokens","style"])}}}),ve=e.defineComponent({__name:"Jump",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`position ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"0.75s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-jump`},n.style])},null,8,["className","tokens","style"])}}}),ed=e.defineComponent({__name:"Tada",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"1s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal both running tada`},n.style])},null,8,["className","tokens","style"])}}}),dd=e.defineComponent({__name:"Jelly",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"1s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal both running mfm-rubberBand`},n.style])},null,8,["className","tokens","style"])}}}),ud=e.defineComponent({__name:"Spin",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`position ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"1.5s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-spin`},n.style])},null,8,["className","tokens","style"])}}}),nd=e.defineComponent({__name:"Twitch",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"1s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-twitch`},n.style])},null,8,["className","tokens","style"])}}}),td=e.defineComponent({__name:"Shake",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`position ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"0.5s"} ease ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-shake`},n.style])},null,8,["className","tokens","style"])}}}),cd=e.defineComponent({__name:"Bounce",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"0.75s"} linear ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-bounce`,transformOrigin:"center bottom"},n.style])},null,8,["className","tokens","style"])}}}),rd=e.defineComponent({__name:"Rainbow",props:{token:{},children:{},style:{},className:{}},setup(u){return(n,r)=>{const f=e.resolveComponent("MfmComponent");return e.openBlock(),e.createBlock(f,{className:`rotate ${n.className??""}`,tokens:n.children,style:e.normalizeStyle([{animation:`${e.unref($)(n.token.args.speed)??"0.5s"} ease ${e.unref($)(n.token.args.delay)??"0s"} infinite normal none running mfm-rainbow`},n.style])},null,8,["className","tokens","style"])}}}),od=[(u=>(e.pushScopeId("data-v-0b45643b"),u=u(),e.popScopeId(),u))(()=>e.createElementVNode("path",{fill:"currentColor",d:"M197.58 129.06l-51.61-19-19-51.65a15.92 15.92 0 0 0-29.88 0L78.07 110l-51.65 19a15.92 15.92 0 0 0 0 29.88L78 178l19 51.62a15.92 15.92 0 0 0 29.88 0l19-51.61 51.65-19a15.92 15.92 0 0 0 0-29.88Z"},null,-1))],fd=v(e.defineComponent({__name:"Sparkle",props:{token:{},children:{},style:{},className:{}},setup(u){const n=u,r=e.computed(()=>{var g,C,N,T,b,O;const a=$((N=(C=(g=n.token)==null?void 0:g.props)==null?void 0:C.args)==null?void 0:N.speed)??"1s",d=$((O=(b=(T=n.token)==null?void 0:T.props)==null?void 0:b.args)==null?void 0:O.delay)??"0s";return[{style:{top:"-0.5em",left:"-0.5em",animation:`mfm-sparkle ${a} linear infinite`,animationDelay:d,color:"#eb6f92"}},{style:{top:"-0.5em",right:"-0.5em",animation:`mfm-sparkle ${a} linear infinite`,animationDelay:`calc(${d} + ${a} / 3)`,color:"#f6c177"}},{style:{bottom:"-0.5em",left:"50%",marginLeft:"-0.5em",animation:`mfm-sparkle ${a} linear infinite`,animationDelay:`calc(${d} + ${a} * 2 / 3)`,color:"#9ccfd8"}}]}),f=e.computed(()=>({position:"relative",display:"inline-block",...n.style}));return(a,d)=>{const g=e.resolveComponent("MfmComponent");return e.openBlock(),e.createElementBlock("span",{class:e.normalizeClass(`mfm-sparkle ${a.className??""}`),style:e.normalizeStyle(f.value)},[e.createVNode(g,{tokens:a.children},null,8,["tokens"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(C,N)=>(e.openBlock(),e.createElementBlock("svg",{key:N,class:"mfm-sparkle-particle",style:e.normalizeStyle(C.style),viewBox:"0 0 256 256","aria-hidden":"true"},od,4))),128))],6)}}}),[["__scopeId","data-v-0b45643b"]]),sd=e.defineComponent({__name:"Ruby",props:{children:{},token:{},style:{},className:{}},setup(u){const n=u,r=e.computed(()=>{const f=n.children[0].props.text.split(" ");return{body:f[0],yomi:f[1]}});return(f,a)=>(e.openBlock(),e.createElementBlock("ruby",null,[e.createTextVNode(e.toDisplayString(r.value.body)+" ",1),e.createElementVNode("rt",null,e.toDisplayString(r.value.yomi),1)]))}}),ad=e.defineComponent({__name:"MfmRenderer",props:{text:{}},setup(u){const n=u,r=e.computed(()=>re(n.text,!1));return(f,a)=>(e.openBlock(),e.createBlock(x,{tokens:r.value},null,8,["tokens"]))}});return{install:u=>(u.component("MfmRenderer",ad).component("MfmComponent",x).component("Bold",se).component("Italic",le).component("Quote",me).component("Small",_e).component("Text",de).component("Center",be).component("EmojiCode",Ce).component("Mention",$e).component("Plain",Be).component("BlockCode",Te).component("InlineCode",Ie).component("Search",Se).component("Strike",Pe).component("UnicodeEmoji",qe).component("Url",we).component("Link",Re).component("Hashtag",Ue).component("Fn",Ve).component("Fg",Fe).component("Bg",Ke).component("Font",Je).component("Blur",Xe).component("Flip",Qe).component("Scale",Ge).component("Position",We).component("X2",Ye).component("X3",Ze).component("X4",xe).component("Jump",ve).component("Tada",ed).component("Jelly",dd).component("Spin",ud).component("Twitch",nd).component("Shake",td).component("Bounce",cd).component("Rainbow",rd).component("Sparkle",fd).component("Ruby",sd),u)}});
