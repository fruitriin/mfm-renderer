(function(u,w){typeof exports=="object"&&typeof module<"u"?module.exports=w(require("vue")):typeof define=="function"&&define.amd?define(["vue"],w):(u=typeof globalThis<"u"?globalThis:u||self,u.MMFMRenderer=w(u.Vue))})(this,function(u){"use strict";const w={props:{children:Object,token:Object,plain:{type:Boolean,default:!1},className:String,nowrap:{type:Boolean,default:!1},note:Object,style:Object},methods:{showBr(d,o){return o+1!==this.parsedText.length}},computed:{parsedText(){return this.plain?[this.token.text.replace(/\n/g," ")]:this.token.text.split(/\r\n|\n|\r/)}}},$=(d,o)=>{const n=d.__vccOpts||d;for(const[l,f]of o)n[l]=f;return n},ee={key:0};function de(d,o,n,l,f,e){return u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(e.parsedText,(s,N)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createElementVNode("span",{class:u.normalizeClass(["text",[n.className,d.$attrs.class]]),style:u.normalizeStyle(n.style)},u.toDisplayString(s),7),e.showBr(s,N)?(u.openBlock(),u.createElementBlock("br",ee)):u.createCommentVNode("",!0)],64))),256)}const ue=$(w,[["render",de]]);var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z={},T={},A={},D={},K={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.createLanguage=d.lazy=d.lineEnd=d.lineBegin=d.char=d.newline=d.crlf=d.lf=d.cr=d.notMatch=d.alt=d.seq=d.regexp=d.str=d.Parser=d.failure=d.success=void 0;function o(y,_){return{success:!0,value:_,index:y}}d.success=o;function n(){return{success:!1}}d.failure=n;class l{constructor(_,p){this.handler=(t,r,c)=>{if(c.trace&&this.name!=null){const a=`${r}`;console.log(`${a.padEnd(6," ")}enter ${this.name}`);const h=_(t,r,c);if(h.success){const i=`${r}:${h.index}`;console.log(`${i.padEnd(6," ")}match ${this.name}`)}else{const i=`${r}`;console.log(`${i.padEnd(6," ")}fail ${this.name}`)}return h}return _(t,r,c)},this.name=p}map(_){return new l((p,t,r)=>{const c=this.handler(p,t,r);return c.success?o(c.index,_(c.value)):c})}text(){return new l((_,p,t)=>{const r=this.handler(_,p,t);if(!r.success)return r;const c=_.slice(p,r.index);return o(r.index,c)})}many(_){return new l((p,t,r)=>{let c,a=t;const h=[];for(;a<p.length&&(c=this.handler(p,a,r),!!c.success);)a=c.index,h.push(c.value);return h.length<_?n():o(a,h)})}sep(_,p){if(p<1)throw new Error('"min" must be a value greater than or equal to 1.');return s([this,s([_,this],1).many(p-1)]).map(t=>[t[0],...t[1]])}option(){return N([this,E(null)])}}d.Parser=l;function f(y){return new l((_,p,t)=>_.length-p<y.length||_.substr(p,y.length)!==y?n():o(p+y.length,y))}d.str=f;function e(y){const _=RegExp(`^(?:${y.source})`,y.flags);return new l((p,t,r)=>{const c=p.slice(t),a=_.exec(c);return a==null?n():o(t+a[0].length,a[0])})}d.regexp=e;function s(y,_){return new l((p,t,r)=>{let c,a=t;const h=[];for(let i=0;i<y.length;i++){if(c=y[i].handler(p,a,r),!c.success)return c;a=c.index,h.push(c.value)}return o(a,_!=null?h[_]:h)})}d.seq=s;function N(y){return new l((_,p,t)=>{let r;for(let c=0;c<y.length;c++)if(r=y[c].handler(_,p,t),r.success)return r;return n()})}d.alt=N;function E(y){return new l((_,p,t)=>o(p,y))}function O(y){return new l((_,p,t)=>y.handler(_,p,t).success?n():o(p,null))}d.notMatch=O,d.cr=f("\r"),d.lf=f(`
`),d.crlf=f(`\r
`),d.newline=N([d.crlf,d.cr,d.lf]),d.char=new l((y,_,p)=>{if(y.length-_<1)return n();const t=y.charAt(_);return o(_+1,t)}),d.lineBegin=new l((y,_,p)=>_===0||d.cr.handler(y,_-1,p).success||d.lf.handler(y,_-1,p).success?o(_,null):n()),d.lineEnd=new l((y,_,p)=>_===y.length||d.cr.handler(y,_,p).success||d.lf.handler(y,_,p).success?o(_,null):n());function g(y){const _=new l((p,t,r)=>(_.handler=y().handler,_.handler(p,t,r)));return _}d.lazy=g;function L(y){const _={};for(const p of Object.keys(y))_[p]=g(()=>{const t=y[p](_);if(t==null)throw new Error("syntax must return a parser.");return t.name=p,t});return _}d.createLanguage=L})(K);var I={},R={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.isMfmBlock=void 0;const o=["quote","search","blockCode","mathBlock","center"];function n(m){return o.includes(m.type)}d.isMfmBlock=n;const l=m=>({type:"quote",children:m});d.QUOTE=l;const f=(m,C)=>({type:"search",props:{query:m,content:C}});d.SEARCH=f;const e=(m,C)=>({type:"blockCode",props:{code:m,lang:C}});d.CODE_BLOCK=e;const s=m=>({type:"mathBlock",props:{formula:m}});d.MATH_BLOCK=s;const N=m=>({type:"center",children:m});d.CENTER=N;const E=m=>({type:"unicodeEmoji",props:{emoji:m}});d.UNI_EMOJI=E;const O=m=>({type:"emojiCode",props:{name:m}});d.EMOJI_CODE=O;const g=m=>({type:"bold",children:m});d.BOLD=g;const L=m=>({type:"small",children:m});d.SMALL=L;const y=m=>({type:"italic",children:m});d.ITALIC=y;const _=m=>({type:"strike",children:m});d.STRIKE=_;const p=m=>({type:"inlineCode",props:{code:m}});d.INLINE_CODE=p;const t=m=>({type:"mathInline",props:{formula:m}});d.MATH_INLINE=t;const r=(m,C,M)=>({type:"mention",props:{username:m,host:C,acct:M}});d.MENTION=r;const c=m=>({type:"hashtag",props:{hashtag:m}});d.HASHTAG=c;const a=(m,C)=>{const M={type:"url",props:{url:m}};return C&&(M.props.brackets=C),M};d.N_URL=a;const h=(m,C,M)=>({type:"link",props:{silent:m,url:C},children:M});d.LINK=h;const i=(m,C,M)=>({type:"fn",props:{name:m,args:C},children:M});d.FN=i;const b=m=>({type:"plain",children:[(0,d.TEXT)(m)]});d.PLAIN=b;const k=m=>({type:"text",props:{text:m}});d.TEXT=k})(R),Object.defineProperty(I,"__esModule",{value:!0}),I.inspectOne=I.stringifyTree=I.stringifyNode=I.mergeText=void 0;const H=R;function ne(d){const o=[],n=[];function l(){n.length>0&&(o.push((0,H.TEXT)(n.join(""))),n.length=0)}const f=d.flat(1);for(const e of f)typeof e=="string"?n.push(e):!Array.isArray(e)&&e.type==="text"?n.push(e.props.text):(l(),o.push(e));return l(),o}I.mergeText=ne;function F(d){var o;switch(d.type){case"quote":return S(d.children).split(`
`).map(n=>`> ${n}`).join(`
`);case"search":return d.props.content;case"blockCode":return`\`\`\`${(o=d.props.lang)!==null&&o!==void 0?o:""}
${d.props.code}
\`\`\``;case"mathBlock":return`\\[
${d.props.formula}
\\]`;case"center":return`<center>
${S(d.children)}
</center>`;case"emojiCode":return`:${d.props.name}:`;case"unicodeEmoji":return d.props.emoji;case"bold":return`**${S(d.children)}**`;case"small":return`<small>${S(d.children)}</small>`;case"italic":return`<i>${S(d.children)}</i>`;case"strike":return`~~${S(d.children)}~~`;case"inlineCode":return`\`${d.props.code}\``;case"mathInline":return`\\(${d.props.formula}\\)`;case"mention":return d.props.acct;case"hashtag":return`#${d.props.hashtag}`;case"url":return d.props.brackets?`<${d.props.url}>`:d.props.url;case"link":return`${d.props.silent?"?":""}[${S(d.children)}](${d.props.url})`;case"fn":{const n=Object.keys(d.props.args).map(f=>{const e=d.props.args[f];return e===!0?f:`${f}=${e}`}),l=n.length>0?"."+n.join(","):"";return`$[${d.props.name}${l} ${S(d.children)}]`}case"plain":return`<plain>
${S(d.children)}
</plain>`;case"text":return d.props.text}throw new Error("unknown mfm node")}I.stringifyNode=F;var q;(function(d){d[d.none=0]="none",d[d.inline=1]="inline",d[d.block=2]="block"})(q||(q={}));function S(d){const o=[];let n=q.none;for(const l of d){let f=!0;(0,H.isMfmBlock)(l)?(n===q.none&&(f=!1),n=q.block):((n===q.none||n===q.inline)&&(f=!1),n=q.inline),f&&o.push((0,H.TEXT)(`
`)),o.push(l)}return o.map(l=>F(l)).join("")}I.stringifyTree=S;function V(d,o){if(o(d),d.children!=null)for(const n of d.children)V(n,o)}I.inspectOne=V;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var J;function te(){if(J)return D;J=1;var d=j&&j.__createBinding||(Object.create?function(t,r,c,a){a===void 0&&(a=c);var h=Object.getOwnPropertyDescriptor(r,c);(!h||("get"in h?!r.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return r[c]}}),Object.defineProperty(t,a,h)}:function(t,r,c,a){a===void 0&&(a=c),t[a]=r[c]}),o=j&&j.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),n=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var c in t)c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)&&d(r,t,c);return o(r,t),r},l=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D,"__esModule",{value:!0}),D.language=void 0;const f=n(W()),e=n(K),s=I,N=l(U),E=e.regexp(/[\u0020\u3000\t]/),O=e.regexp(/[a-z0-9]/i),g=e.alt([e.crlf,e.cr,e.lf]);function L(t){return new e.Parser((r,c,a)=>{const h=[];let i=c;for(let b=0;b<t.length;b++){const k=t[b].handler(r,i,a);if(!k.success)return i===c?e.failure():e.success(i,r.slice(c,i));h.push(k.value),i=k.index}return e.success(i,h)})}const y=new e.Parser((t,r,c)=>c.linkLabel?e.failure():e.success(r,null)),_=new e.Parser((t,r,c)=>c.depth<c.nestLimit?e.success(r,null):e.failure());function p(t,r){const c=e.alt([e.seq([_,t],1),r??e.char]);return new e.Parser((a,h,i)=>{i.depth++;const b=c.handler(a,h,i);return i.depth--,b})}return D.language=e.createLanguage({fullParser:t=>t.full.many(0),simpleParser:t=>t.simple.many(0),full:t=>e.alt([t.unicodeEmoji,t.centerTag,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.codeBlock,t.inlineCode,t.quote,t.mathBlock,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.search,t.text]),simple:t=>e.alt([t.unicodeEmoji,t.emojiCode,t.text]),inline:t=>e.alt([t.unicodeEmoji,t.smallTag,t.plainTag,t.boldTag,t.italicTag,t.strikeTag,t.urlAlt,t.big,t.boldAsta,t.italicAsta,t.boldUnder,t.italicUnder,t.inlineCode,t.mathInline,t.strikeWave,t.fn,t.mention,t.hashtag,t.emojiCode,t.link,t.url,t.text]),quote:t=>{const r=e.seq([e.str(">"),E.option(),e.seq([e.notMatch(g),e.char],1).many(0).text()],2).sep(g,1),c=e.seq([g.option(),g.option(),e.lineBegin,r,g.option(),g.option()],3);return new e.Parser((a,h,i)=>{let b;if(b=c.handler(a,h,i),!b.success)return b;const k=b.value,m=b.index;return k.length===1&&k[0].length===0?e.failure():(b=p(t.fullParser).many(0).handler(k.join(`
`),0,i),b.success?e.success(m,f.QUOTE((0,s.mergeText)(b.value))):b)})},codeBlock:t=>{const r=e.str("```");return e.seq([g.option(),e.lineBegin,r,e.seq([e.notMatch(g),e.char],1).many(0),g,e.seq([e.notMatch(e.seq([g,r,e.lineEnd])),e.char],1).many(1),g,r,e.lineEnd,g.option()]).map(c=>{const a=c[3].join("").trim(),h=c[5].join("");return f.CODE_BLOCK(h,a.length>0?a:null)})},mathBlock:t=>{const r=e.str("\\["),c=e.str("\\]");return e.seq([g.option(),e.lineBegin,r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),e.char],1).many(1),g.option(),c,e.lineEnd,g.option()]).map(a=>{const h=a[4].join("");return f.MATH_BLOCK(h)})},centerTag:t=>{const r=e.str("<center>"),c=e.str("</center>");return e.seq([g.option(),e.lineBegin,r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),p(t.inline)],1).many(1),g.option(),c,e.lineEnd,g.option()]).map(a=>f.CENTER((0,s.mergeText)(a[4])))},big:t=>{const r=e.str("***");return L([r,e.seq([e.notMatch(r),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:f.FN("tada",{},(0,s.mergeText)(c[1])))},boldAsta:t=>{const r=e.str("**");return L([r,e.seq([e.notMatch(r),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:f.BOLD((0,s.mergeText)(c[1])))},boldTag:t=>{const r=e.str("<b>"),c=e.str("</b>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(a=>typeof a=="string"?a:f.BOLD((0,s.mergeText)(a[1])))},boldUnder:t=>{const r=e.str("__");return e.seq([r,e.alt([O,E]).many(1),r]).map(c=>f.BOLD((0,s.mergeText)(c[1])))},smallTag:t=>{const r=e.str("<small>"),c=e.str("</small>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(a=>typeof a=="string"?a:f.SMALL((0,s.mergeText)(a[1])))},italicTag:t=>{const r=e.str("<i>"),c=e.str("</i>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(a=>typeof a=="string"?a:f.ITALIC((0,s.mergeText)(a[1])))},italicAsta:t=>{const r=e.str("*"),c=e.seq([r,e.alt([O,E]).many(1),r]);return new e.Parser((a,h,i)=>{const b=c.handler(a,h,i);if(!b.success)return e.failure();const k=a.slice(0,h);return/[a-z0-9]$/i.test(k)?e.failure():e.success(b.index,f.ITALIC((0,s.mergeText)(b.value[1])))})},italicUnder:t=>{const r=e.str("_"),c=e.seq([r,e.alt([O,E]).many(1),r]);return new e.Parser((a,h,i)=>{const b=c.handler(a,h,i);if(!b.success)return e.failure();const k=a.slice(0,h);return/[a-z0-9]$/i.test(k)?e.failure():e.success(b.index,f.ITALIC((0,s.mergeText)(b.value[1])))})},strikeTag:t=>{const r=e.str("<s>"),c=e.str("</s>");return L([r,e.seq([e.notMatch(c),p(t.inline)],1).many(1),c]).map(a=>typeof a=="string"?a:f.STRIKE((0,s.mergeText)(a[1])))},strikeWave:t=>{const r=e.str("~~");return L([r,e.seq([e.notMatch(e.alt([r,g])),p(t.inline)],1).many(1),r]).map(c=>typeof c=="string"?c:f.STRIKE((0,s.mergeText)(c[1])))},unicodeEmoji:t=>{const r=RegExp(N.default.source);return e.regexp(r).map(c=>f.UNI_EMOJI(c))},plainTag:t=>{const r=e.str("<plain>"),c=e.str("</plain>");return e.seq([r,g.option(),e.seq([e.notMatch(e.seq([g.option(),c])),e.char],1).many(1).text(),g.option(),c],2).map(a=>f.PLAIN(a))},fn:t=>{const r=new e.Parser((i,b,k)=>{const m=e.regexp(/[a-z0-9_]+/i).handler(i,b,k);return m.success?e.success(m.index,m.value):m}),c=e.seq([e.regexp(/[a-z0-9_]+/i),e.seq([e.str("="),e.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(i=>({k:i[0],v:i[1]!=null?i[1]:!0})),a=e.seq([e.str("."),c.sep(e.str(","),1)],1).map(i=>{const b={};for(const k of i)b[k.k]=k.v;return b}),h=e.str("]");return L([e.str("$["),r,a.option(),e.str(" "),e.seq([e.notMatch(h),p(t.inline)],1).many(1),h]).map(i=>{if(typeof i=="string")return i;const b=i[1],k=i[2]||{},m=i[4];return f.FN(b,k,(0,s.mergeText)(m))})},inlineCode:t=>{const r=e.str("`");return e.seq([r,e.seq([e.notMatch(e.alt([r,e.str("´"),g])),e.char],1).many(1),r]).map(c=>f.INLINE_CODE(c[1].join("")))},mathInline:t=>{const r=e.str("\\("),c=e.str("\\)");return e.seq([r,e.seq([e.notMatch(e.alt([c,g])),e.char],1).many(1),c]).map(a=>f.MATH_INLINE(a[1].join("")))},mention:t=>{const r=e.seq([y,e.str("@"),e.regexp(/[a-z0-9_-]+/i),e.seq([e.str("@"),e.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new e.Parser((c,a,h)=>{let i;if(i=r.handler(c,a,h),!i.success)return e.failure();const b=c.slice(0,a);if(/[a-z0-9]$/i.test(b))return e.failure();let k=!1;const m=i.index,C=i.value[2],M=i.value[3];let B=M;M!=null&&(i=/[.-]+$/.exec(M),i!=null&&(B=M.slice(0,-1*i[0].length),B.length===0&&(k=!0,B=null)));let P=C;if(i=/-+$/.exec(C),i!=null&&(B==null?P=C.slice(0,-1*i[0].length):k=!0),(P.length===0||P[0]==="-")&&(k=!0),B!=null&&/^[.-]/.test(B)&&(k=!0),k)return e.success(m,c.slice(a,m));const v=B!=null?`@${P}@${B}`:`@${P}`;return e.success(a+v.length,f.MENTION(P,B,v))})},hashtag:t=>{const r=e.str("#"),c=e.seq([e.notMatch(e.alt([e.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),E,g])),e.char],1),a=e.lazy(()=>e.alt([e.seq([e.str("("),p(a,c).many(0),e.str(")")]),e.seq([e.str("["),p(a,c).many(0),e.str("]")]),e.seq([e.str("「"),p(a,c).many(0),e.str("」")]),e.seq([e.str("（"),p(a,c).many(0),e.str("）")]),c])),h=e.seq([y,r,a.many(1).text()],2);return new e.Parser((i,b,k)=>{const m=h.handler(i,b,k);if(!m.success)return e.failure();const C=i.slice(0,b);if(/[a-z0-9]$/i.test(C))return e.failure();const M=m.index,B=m.value;return/^[0-9]+$/.test(B)?e.failure():e.success(M,f.HASHTAG(B))})},emojiCode:t=>{const r=e.notMatch(e.regexp(/[a-z0-9]/i)),c=e.str(":");return e.seq([e.alt([e.lineBegin,r]),c,e.regexp(/[a-z0-9_+-]+/i),c,e.alt([e.lineEnd,r])],2).map(a=>f.EMOJI_CODE(a))},link:t=>{const r=new e.Parser((a,h,i)=>{i.linkLabel=!0;const b=t.inline.handler(a,h,i);return i.linkLabel=!1,b}),c=e.str("]");return e.seq([y,e.alt([e.str("?["),e.str("[")]),e.seq([e.notMatch(e.alt([c,g])),p(r)],1).many(1),c,e.str("("),e.alt([t.urlAlt,t.url]),e.str(")")]).map(a=>{const h=a[1]==="?[",i=a[2],b=a[5];return f.LINK(h,b.props.url,(0,s.mergeText)(i))})},url:t=>{const r=e.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),c=e.lazy(()=>e.alt([e.seq([e.str("("),p(c,r).many(0),e.str(")")]),e.seq([e.str("["),p(c,r).many(0),e.str("]")]),r])),a=e.seq([y,e.regexp(/https?:\/\//),c.many(1).text()]);return new e.Parser((h,i,b)=>{let k;if(k=a.handler(h,i,b),!k.success)return e.failure();const m=k.index;let C=m;const M=k.value[1];let B=k.value[2];return k=/[.,]+$/.exec(B),k!=null&&(C-=k[0].length,B=B.slice(0,-1*k[0].length),B.length===0)?e.success(m,h.slice(i,m)):e.success(C,f.N_URL(M+B,!1))})},urlAlt:t=>{const r=e.str("<"),c=e.str(">"),a=e.seq([y,r,e.regexp(/https?:\/\//),e.seq([e.notMatch(e.alt([c,E])),e.char],1).many(1),c]).text();return new e.Parser((h,i,b)=>{const k=a.handler(h,i,b);if(!k.success)return e.failure();const m=k.value.slice(1,k.value.length-1);return e.success(k.index,f.N_URL(m,!0))})},search:t=>{const r=e.alt([e.regexp(/\[(検索|search)\]/i),e.regexp(/(検索|search)/i)]);return e.seq([g.option(),e.lineBegin,e.seq([e.notMatch(e.alt([g,e.seq([E,r,e.lineEnd])])),e.char],1).many(1),E,r,e.lineEnd,g.option()]).map(c=>{const a=c[2].join("");return f.SEARCH(a,`${a}${c[3]}${c[4]}`)})},text:t=>e.char}),D}var Q;function ce(){if(Q)return A;Q=1,Object.defineProperty(A,"__esModule",{value:!0}),A.simpleParser=A.fullParser=void 0;const d=te(),o=I;function n(f,e){const s=d.language.fullParser.handler(f,0,{nestLimit:e.nestLimit!=null?e.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,o.mergeText)(s.value)}A.fullParser=n;function l(f){const e=d.language.simpleParser.handler(f,0,{});return(0,o.mergeText)(e.value)}return A.simpleParser=l,A}var X;function re(){if(X)return T;X=1,Object.defineProperty(T,"__esModule",{value:!0}),T.extract=T.inspect=T.toString=T.parseSimple=T.parse=void 0;const d=ce(),o=I;function n(N,E={}){return(0,d.fullParser)(N,{nestLimit:E.nestLimit})}T.parse=n;function l(N){return(0,d.simpleParser)(N)}T.parseSimple=l;function f(N){return Array.isArray(N)?(0,o.stringifyTree)(N):(0,o.stringifyNode)(N)}T.toString=f;function e(N,E){if(Array.isArray(N))for(const O of N)(0,o.inspectOne)(O,E);else(0,o.inspectOne)(N,E)}T.inspect=e;function s(N,E){const O=[];return e(N,g=>{E(g)&&O.push(g)}),O}return T.extract=s,T}var G;function W(){return G||(G=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.extract=d.inspect=d.toString=d.parseSimple=d.parse=void 0;var o=re();Object.defineProperty(d,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(d,"parseSimple",{enumerable:!0,get:function(){return o.parseSimple}}),Object.defineProperty(d,"toString",{enumerable:!0,get:function(){return o.toString}}),Object.defineProperty(d,"inspect",{enumerable:!0,get:function(){return o.inspect}}),Object.defineProperty(d,"extract",{enumerable:!0,get:function(){return o.extract}});var n=R;Object.defineProperty(d,"QUOTE",{enumerable:!0,get:function(){return n.QUOTE}}),Object.defineProperty(d,"SEARCH",{enumerable:!0,get:function(){return n.SEARCH}}),Object.defineProperty(d,"CODE_BLOCK",{enumerable:!0,get:function(){return n.CODE_BLOCK}}),Object.defineProperty(d,"MATH_BLOCK",{enumerable:!0,get:function(){return n.MATH_BLOCK}}),Object.defineProperty(d,"CENTER",{enumerable:!0,get:function(){return n.CENTER}}),Object.defineProperty(d,"UNI_EMOJI",{enumerable:!0,get:function(){return n.UNI_EMOJI}}),Object.defineProperty(d,"EMOJI_CODE",{enumerable:!0,get:function(){return n.EMOJI_CODE}}),Object.defineProperty(d,"BOLD",{enumerable:!0,get:function(){return n.BOLD}}),Object.defineProperty(d,"SMALL",{enumerable:!0,get:function(){return n.SMALL}}),Object.defineProperty(d,"ITALIC",{enumerable:!0,get:function(){return n.ITALIC}}),Object.defineProperty(d,"STRIKE",{enumerable:!0,get:function(){return n.STRIKE}}),Object.defineProperty(d,"INLINE_CODE",{enumerable:!0,get:function(){return n.INLINE_CODE}}),Object.defineProperty(d,"MATH_INLINE",{enumerable:!0,get:function(){return n.MATH_INLINE}}),Object.defineProperty(d,"MENTION",{enumerable:!0,get:function(){return n.MENTION}}),Object.defineProperty(d,"HASHTAG",{enumerable:!0,get:function(){return n.HASHTAG}}),Object.defineProperty(d,"N_URL",{enumerable:!0,get:function(){return n.N_URL}}),Object.defineProperty(d,"LINK",{enumerable:!0,get:function(){return n.LINK}}),Object.defineProperty(d,"FN",{enumerable:!0,get:function(){return n.FN}}),Object.defineProperty(d,"PLAIN",{enumerable:!0,get:function(){return n.PLAIN}}),Object.defineProperty(d,"TEXT",{enumerable:!0,get:function(){return n.TEXT}})}(z)),z}var Y=W();function oe(d,o){return d==null||d===""?[]:o?Y.parseSimple(d):Y.parse(d)}function Z(d){return d.replace(/(^.)(.*)/,(o,n,l)=>`${n.toUpperCase()+l}`)}const fe=u.defineComponent({data(){return{debugMode:this.debugMode}},props:{tokens:{required:!0,type:Object},style:Object,className:String,class:String},methods:{getComponent:Z}}),se={key:0,style:{border:"solid 1px red"}};function ae(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock(u.Fragment,null,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(d.tokens,s=>(u.openBlock(),u.createBlock(u.resolveDynamicComponent(`${d.getComponent(s.type)}`),{style:u.normalizeStyle(d.style),className:d.className,token:s.props,children:s.children},null,8,["style","className","token","children"]))),256)),d.debugMode?(u.openBlock(),u.createElementBlock("div",se,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(d.tokens,s=>(u.openBlock(),u.createElementBlock("div",null,[u.createElementVNode("p",null,"Selected: "+u.toDisplayString(d.getComponent(s.type)),1),u.createElementVNode("pre",null,u.toDisplayString(s),1)]))),256))])):u.createCommentVNode("",!0)],64)}const x=$(fe,[["render",ae]]),le={props:["children"]},ie={class:"bold"};function me(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("b",ie,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const pe=$(le,[["render",me]]),_e={props:["children"]},he={class:"italic"};function be(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("i",he,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const ye=$(_e,[["render",be]]),ke={props:["children"]},ge={class:"quote",style:{display:"block",margin:"8px",padding:"6px 0px 6px 12px",color:"var(--fg)","border-left":"solid 3px var(--fg)",opacity:"0.7"}};function $e(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("div",ge,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const Ne=$(ke,[["render",$e]]),Ce={props:["children","token","style"]},Ee={class:"small",style:{opacity:"0.7"}};function Be(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("small",Ee,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const Me=$(Ce,[["render",Be]]),Te={props:["children","class","className"]},Oe={class:"center"};function Ie(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("div",Oe,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const Le=$(Te,[["render",Ie]]),Se=u.defineComponent({inject:["emojis"],data(){return{emojis:this.emojis}},props:["token","children","className","class","style"]}),je=["src"],qe={key:1};function Ae(d,o,n,l,f,e){return d.emojis[d.token.name]?(u.openBlock(),u.createElementBlock("img",{key:0,src:d.emojis[d.token.name].url,class:"emoji"},null,8,je)):(u.openBlock(),u.createElementBlock("span",qe,":"+u.toDisplayString(d.token.name)+":",1))}const Pe=$(Se,[["render",Ae],["__scopeId","data-v-ddea4386"]]),we=u.defineComponent({props:["token","children","style","className"],inject:["domain"],data(){return{domain:this.domain,user:void 0}},watch:{token:{immediate:!0,async handler(){const d=await fetch(`https:/${this.token.host??this.domain}/api/users/search-by-username-and-host`,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({detail:!1,limit:1,username:this.token.username})});this.user=(await d.json())[0]}}}}),De=["href"],ze=["src"];function Re(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("a",{class:"mention",href:d.token.host??"https://"+d.domain+"/"+d.token.acct},[d.user?(u.openBlock(),u.createElementBlock("img",{key:0,class:"avatar",src:d.user.avatarUrl},null,8,ze)):u.createCommentVNode("",!0),u.createTextVNode(u.toDisplayString(d.token.acct),1)],8,De)}const He=$(we,[["render",Re]]),Ue={props:["children","token","style","className"]};function Ke(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{tokens:n.children},null,8,["tokens"])}const Fe=$(Ue,[["render",Ke]]),Ve={props:["token","children","style","className"]},Je={class:"block-code"};function Qe(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createTextVNode(u.toDisplayString(n.token.lang)+" ",1),u.createElementVNode("pre",Je,[u.createTextVNode("    "),u.createElementVNode("code",null,u.toDisplayString(n.token.code),1),u.createTextVNode(`
  `)])],64)}const Xe=$(Ve,[["render",Qe]]),Ge={props:["token","children","style","className"]},We={class:"inline-code"};function Ye(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("pre",We,u.toDisplayString(n.token.code),1)}const Ze=$(Ge,[["render",Ye]]),xe={data(){return{currentQuery:this.token.query}},props:{token:{type:Object,required:!0},children:{type:Object}},methods:{search(){window.open("https://www.google.com/search?q="+encodeURIComponent(this.currentQuery),"_blank")}}},ve={class:"search"};function ed(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("div",ve,[u.withDirectives(u.createElementVNode("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>f.currentQuery=s)},null,512),[[u.vModelText,f.currentQuery]]),u.createElementVNode("button",{onClick:o[1]||(o[1]=(...s)=>e.search&&e.search(...s))},"検索")])}const dd=$(xe,[["render",ed]]),ud={props:["token","children"]},nd={class:"strike"};function td(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock("del",nd,[u.createVNode(s,{tokens:n.children},null,8,["tokens"])])}const cd=$(ud,[["render",td]]),rd={props:["children","token","class","style"]};function od(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("span",{style:u.normalizeStyle(n.style)},u.toDisplayString(n.token.emoji),5)}const fd=$(rd,[["render",od]]),sd={name:"Url.vue",props:{token:{type:Object},children:{type:Object}}},ad=["href","textContent"];function ld(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("a",{class:"url",href:n.token.url,textContent:u.toDisplayString(n.token.url)},null,8,ad)}const id=$(sd,[["render",ld]]),md=u.defineComponent({inject:["debugMode"],data(){return{debugMode:this.debugMode}},props:{token:{type:Object},children:{type:Object},className:{type:String},style:{type:Object},class:{type:String}}}),pd={key:0},_d=["href"];function hd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createElementBlock(u.Fragment,null,[d.debugMode?(u.openBlock(),u.createElementBlock("span",pd,"silent - "+u.toDisplayString(d.token.silent),1)):u.createCommentVNode("",!0),u.createElementVNode("a",{class:u.normalizeClass(["link",d.className]),href:d.token.url,style:u.normalizeStyle(d.style)},[u.createVNode(s,{tokens:d.children},null,8,["tokens"])],14,_d)],64)}const bd=$(md,[["render",hd]]),yd={props:["token","children","style"]},kd=["href"];function gd(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("a",{class:"hashtag",href:"/tags/"+n.token.hashtag},"#"+u.toDisplayString(n.token.hashtag),9,kd)}const $d=$(yd,[["render",gd]]),Nd={methods:{getComponent:Z},props:["token","tokens","children","style","className"]};function Cd(d,o,n,l,f,e){return u.openBlock(),u.createBlock(u.resolveDynamicComponent(e.getComponent(n.token.name)),{className:`Fn ${n.token.name} ${n.className??""}`,token:n.token,children:n.children,style:u.normalizeStyle(n.style)},null,8,["className","token","children","style"])}const Ed=$(Nd,[["render",Cd]]),Bd={props:["token","children","style","className"]};function Md(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`fg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{color:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}const Td=$(Bd,[["render",Md]]),Od={props:["token","children","style","className"]};function Id(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`bg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{background:`#${n.token.args.color}`},n.style])},null,8,["className","tokens","style"])}const Ld=$(Od,[["render",Id]]),Sd={props:["token","children","style","className"]};function jd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`fg ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}const qd=$(Sd,[["render",jd]]),Ad={props:["token","children","style","className"]};function Pd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`blur ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontFamily:Object.keys(n.token.args)},n.style])},null,8,["className","tokens","style"])}const wd=$(Ad,[["render",Pd]]),Dd={props:["token","children","style","className"]};function zd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`flip ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`scale(${n.token.args.h?1:-1}, ${n.token.args.v?-1:1})`},n.style])},null,8,["className","tokens","style"])}const Rd=$(Dd,[["render",zd]]),Hd={props:["token","children","style","className"]};function Ud(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`scale(${n.token.args.x}, ${n.token.args.y})`},n.style])},null,8,["className","tokens","style"])}const Kd=$(Hd,[["render",Ud]]),Fd={props:["token","children","style","className"]};function Vd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{transform:`translateX(${n.token.args.x}em) translateY(${n.token.args.y}em)`},n.style])},null,8,["className","tokens","style"])}const Jd=$(Fd,[["render",Vd]]),Qd={props:["token","children","style","className"]};function Xd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"200%"},n.style])},null,8,["className","tokens","style"])}const Gd=$(Qd,[["render",Xd]]),Wd={props:["token","children","style","className"]};function Yd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"300%"},n.style])},null,8,["className","tokens","style"])}const Zd=$(Wd,[["render",Yd]]),xd={props:["token","children","style","className"]};function vd(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{fontSize:"400%"},n.style])},null,8,["className","tokens","style"])}const eu=$(xd,[["render",vd]]),du={props:["token","children","style","className"]};function uu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.75s"} linear 0s infinite normal none running mfm-jump`},n.style])},null,8,["className","tokens","style"])}const nu=$(du,[["render",uu]]),tu={props:["token","children","style","className"]};function cu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal both running tada`},n.style])},null,8,["className","tokens","style"])}const ru=$(tu,[["render",cu]]),ou={props:["token","children","style","className"]};function fu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal both running mfm-rubberBand`},n.style])},null,8,["className","tokens","style"])}const su=$(ou,[["render",fu]]),au={props:["token","children","style","className"]};function lu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1.5s"} linear 0s infinite normal none running mfm-spin`},n.style])},null,8,["className","tokens","style"])}const iu=$(au,[["render",lu]]),mu={props:["token","children","style","className"]};function pu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"1s"} linear 0s infinite normal none running mfm-twitch`},n.style])},null,8,["className","tokens","style"])}const _u=$(mu,[["render",pu]]),hu={props:["token","children","style","className"]};function bu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`position ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.5s"} ease 0s infinite normal none running mfm-shake`},n.style])},null,8,["className","tokens","style"])}const yu=$(hu,[["render",bu]]),ku={props:["token","children","style","className"]};function gu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.75s"} linear 0s infinite normal none running mfm-bounce`,transformOrigin:"center bottom"},n.style])},null,8,["className","tokens","style"])}const $u=$(ku,[["render",gu]]),Nu={props:["token","children","style","className"]};function Cu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{className:`rotate ${n.className??""}`,tokens:n.children,style:u.normalizeStyle([{animation:`${n.token.args.speed??"0.5s"} ease 0s infinite normal none running mfm-rainbow`},n.style])},null,8,["className","tokens","style"])}const Eu=$(Nu,[["render",Cu]]),Bu={props:["children","token","style","className"],computed:{ruby(){const d=this.children[0].props.text.split(" ");return{body:d[0],yomi:d[1]}}}};function Mu(d,o,n,l,f,e){return u.openBlock(),u.createElementBlock("ruby",null,[u.createTextVNode(u.toDisplayString(e.ruby.body)+" ",1),u.createElementVNode("rt",null,u.toDisplayString(e.ruby.yomi),1)])}const Tu=$(Bu,[["render",Mu]]),Ou=u.defineComponent({components:{MfmComponent:x},props:{text:{required:!0,type:String}},computed:{parsedMfm(){return oe(this.text,!1)}}});function Iu(d,o,n,l,f,e){const s=u.resolveComponent("MfmComponent");return u.openBlock(),u.createBlock(s,{tokens:d.parsedMfm},null,8,["tokens"])}const Lu=$(Ou,[["render",Iu]]);return{install:d=>(d.component("MfmRenderer",Lu).component("MfmComponent",x).component("Bold",pe).component("Italic",ye).component("Quote",Ne).component("Small",Me).component("Text",ue).component("Center",Le).component("EmojiCode",Pe).component("Mention",He).component("Plain",Fe).component("BlockCode",Xe).component("InlineCode",Ze).component("Search",dd).component("Strike",cd).component("UnicodeEmoji",fd).component("Url",id).component("Link",bd).component("Hashtag",$d).component("Fn",Ed).component("Fg",Td).component("Bg",Ld).component("Font",qd).component("Blur",wd).component("Flip",Rd).component("Scale",Kd).component("Position",Jd).component("X2",Gd).component("X3",Zd).component("X4",eu).component("Jump",nu).component("Tada",ru).component("Jelly",su).component("Spin",iu).component("Twitch",_u).component("Shake",yu).component("Bounce",$u).component("Rainbow",Eu).component("Ruby",Tu),d)}});
